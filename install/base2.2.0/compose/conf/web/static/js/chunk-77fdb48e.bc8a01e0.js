(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-77fdb48e"],{"1a07":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"f",(function(){return n})),r.d(e,"c",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"e",(function(){return l})),r.d(e,"b",(function(){return c}));r("99af");var i=r("b775"),o=r("c38a");function a(t){return Object(i["a"])({url:"/mh/hour/day/create",method:"post",data:t})}function n(t){return Object(i["a"])({url:"/mh/hour/day/edit",method:"put",data:t})}function s(t){return Object(i["a"])({url:"/mh/hour/day/"+Object(o["e"])(t),method:"get"})}function u(t,e){return Object(i["a"])({url:"/mh/hour/day/list?endDate=".concat(e,"&startDate=").concat(t),method:"get"})}function l(t){return Object(i["a"])({url:"/mh/hour/day/query",method:"get",params:t})}function c(){return Object(i["a"])({url:"/mh/hour/day/fillStatus",method:"get"})}},"3e33":function(t,e,r){},"4fee":function(t,e,r){"use strict";r.d(e,"a",(function(){return o})),r.d(e,"f",(function(){return a})),r.d(e,"b",(function(){return n})),r.d(e,"d",(function(){return s})),r.d(e,"c",(function(){return u})),r.d(e,"e",(function(){return l}));var i=r("b775");function o(t){return Object(i["a"])({url:"/project/create",method:"post",data:t})}function a(t){return Object(i["a"])({url:"/project/list",method:"get",params:t})}function n(t){return Object(i["a"])({url:"/project/remove?projectId="+t,method:"delete"})}function s(t){return Object(i["a"])({url:"/project/"+t,method:"get"})}function u(t){return Object(i["a"])({type:"form",url:"/project/enable",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"put",data:t})}function l(){return Object(i["a"])({url:"/project/myJoin",method:"get"})}},"603f":function(t,e,r){"use strict";r("3e33")},7276:function(t,e,r){"use strict";r.r(e);var i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("el-dialog",{staticStyle:{width:"80%",margin:"0 auto"},attrs:{title:"编辑工时:"+t.hourTime,visible:t.dialogFormVisible,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{staticStyle:{"max-height":"600px","overflow-y":"scroll"},attrs:{model:t.form,"status-icon":"",rules:t.rules},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit(e)}}},[t._l(t.projectArr,(function(e){return r("el-form-item",{key:e.projectId},[r("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"projectLabel"},[t._v(" #"+t._s(e.projectId)+" "+t._s(e.projectName)+" ")])]),r("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[r("el-input-number",{staticStyle:{"margin-right":"auto",width:"40%"},attrs:{type:"number",max:24,min:0,maxlength:"2",autocomplete:"off",disabled:e.isArchive,precision:2},on:{input:function(r){return t.lookinput(e.hour)}},model:{value:e.hour,callback:function(r){t.$set(e,"hour",t._n(r))},expression:"item.hour"}}),r("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")])],1),r("hr"),r("el-input",{staticStyle:{"margin-top":"5px"},attrs:{type:"textarea",maxlength:"200",disabled:e.isArchive,autosize:{minRows:2,maxRows:6},"show-word-limit":"",placeholder:"请填写日志"},model:{value:e.daily,callback:function(r){t.$set(e,"daily",r)},expression:"item.daily"}})],1)],1)})),r("el-form-item",[r("el-card",{staticClass:"box-card",attrs:{shadow:"never",mode:t.otherHour}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"projectLabel"},[t._v("其他工时")])]),r("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[r("el-input-number",{staticStyle:{"margin-right":"auto",width:"40%"},attrs:{type:"number",max:24,min:0,maxlength:"2",autocomplete:"off",precision:2},on:{input:function(e){return t.lookinput(t.otherHour.hour)}},model:{value:t.otherHour.hour,callback:function(e){t.$set(t.otherHour,"hour",t._n(e))},expression:"otherHour.hour"}}),r("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")])],1),r("hr"),r("el-input",{staticStyle:{"margin-top":"5px"},attrs:{type:"textarea",maxlength:"200",autosize:{minRows:2,maxRows:6},"show-word-limit":"",placeholder:"请填写日志"},model:{value:t.otherHour.daily,callback:function(e){t.$set(t.otherHour,"daily",e)},expression:"otherHour.daily"}})],1)],1)],2),r("div",{staticClass:"myfoot"},[r("div",{staticStyle:{float:"right","text-align":"right"}},[r("span",{staticClass:"tips",staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.submitTips))]),r("el-input",{staticStyle:{width:"20%"},attrs:{max:24,autocomplete:"off",disabled:!0},model:{value:t.useHourTotal,callback:function(e){t.useHourTotal=t._n(e)},expression:"useHourTotal"}}),r("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")]),r("div",{staticClass:"footer-btn",attrs:{slot:"footer",align:"center"},slot:"footer"},[r("el-button",{style:{width:"100px"},attrs:{size:"small"},on:{click:t.handleClose}},[t._v(" 取 消 ")]),r("el-button",{style:{width:"100px"},attrs:{disabled:t.submitFlag,size:"small",type:"primary"},on:{click:t.handleSubmit}},[t._v(" 提交 ")])],1)],1)])],1)],1)},o=[],a=r("ade3"),n=(r("7db0"),r("14d9"),r("d3b7"),r("0643"),r("fffc"),r("4e3e"),r("159b"),r("1a07")),s=r("4fee"),u={data:function(){var t=function(t,e,r){};return Object(a["a"])(Object(a["a"])(Object(a["a"])(Object(a["a"])({dialogFormVisible:!1,form:{date:"",projectHours:[],id:""},rules:{hour:[{validator:t,trigger:"blur"}]},hourTime:"",projectArr:[],otherHour:{hour:0,daily:""},info:{}},"rules",{hour:[{validator:t,trigger:"blur"}]}),"useHourTotal",0),"submitFlag",!0),"submitTips","")},created:function(){},methods:{open:function(){this.submitFlag=!0,this.hourTime=this.info.fillDate,this.form.id=this.info.id,this.getProjectList(),this.dialogFormVisible=!0},getProjectList:function(){var t=this;Object(s["e"])().then((function(e){200==e.code&&e.data.forEach((function(e){var r=t.projectArr.find((function(t){return t.projectId===e.projectId}));r||t.projectArr.push(e)}))}))},handleSubmit:function(){var t=this;this.form.date=this.hourTime;var e=0;if(this.projectArr.forEach((function(t){e+=t.hour+0,t.projectName&&delete t.projectName})),e+=this.otherHour.hour,e>=24||e<=0)return this.submitFlag=!0,void(this.submitTips="无法提交，工时不能为0 或者超过24小时! ");var r={id:this.form.id,projectHours:this.projectArr,otherHour:this.otherHour};Object(n["f"])(r).then((function(e){200==e.code?(t.$message.success("修改成功"),t.$emit("commit"),t.handleClose()):t.$message.error("提交失败，失败原因为：",e.msg)})).catch((function(e){t.$message.error("出现错误，错误原因为",e)}))},handleClose:function(){this.submitFlag=!0,this.submitTips="",this.form.projectHours=[],this.form.date="",this.projectArr=[],this.otherHour={hour:0,daily:""},this.dialogFormVisible=!1},lookinput:function(t){null!=t&&void 0!=t||(t=0);var e=0;return this.projectArr.forEach((function(t){return e+=t.hour+0})),e+=this.otherHour.hour,this.useHourTotal=e,""===t||t<0?(t=0,this.submitFlag=!0,void(this.submitTips="工时不能为空")):e>=24?(this.submitFlag=!0,void(this.submitTips="无法提交，工时最大范围为1-24小时! ")):e>8?(this.submitFlag=!1,void(this.submitTips="可以提交!（加班）")):e>0?(this.submitFlag=!1,void(this.submitTips="可以提交")):(this.submitTips="请填写工时，工时范围为1-24小时!",void(this.submitFlag=!0))}}},l=u,c=(r("603f"),r("2877")),d=Object(c["a"])(l,i,o,!1,null,"b64aca56",null);e["default"]=d.exports}}]);