(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5118c8a4","chunk-d9adfeb8"],{"49b2":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("el-dialog",{attrs:{title:"添加人员",visible:t.centerDialogVisible,width:"36%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e},close:t.beforeClose}},[[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.transferData.filter((function(e){return!t.search||e.nickName.toLowerCase().includes(t.search.toLowerCase())}))},on:{"selection-change":t.handleSelectionChange}},[r("el-table-column",{attrs:{type:"index",label:"序号"}}),r("el-table-column",{attrs:{label:"用户名",prop:"userName"}}),r("el-table-column",{attrs:{label:"姓名",prop:"nickName"}}),r("el-table-column",{attrs:{prop:"email"}},[r("template",{slot:"header"},[r("el-input",{attrs:{size:"mini",clearable:"",placeholder:"输入姓名搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],2),r("el-table-column",{attrs:{type:"selection",align:"center"}})],1)],r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:t.beforeClose}},[t._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:t.handleclick}},[t._v("确认添加")])],1)],2)],1)},a=[],s=(r("4de4"),r("14d9"),r("d3b7"),r("0643"),r("2382"),r("4e3e"),r("159b"),r("b79f")),o=r("c0c7"),i={data:function(){this.$createElement;return{centerDialogVisible:!1,projectId:"",transferData:[],search:"",multipleSelection:[],checked:[],renderFunc:function(t,e){return t("span",[e.key," - ",e.label])},filterMethod:function(t,e){return e.nickName.indexOf(t)>-1},listUser:[]}},created:function(){},methods:{open:function(){var t=this;setTimeout((function(){t.settransfer(),t.getObject(),t.centerDialogVisible=!0}),100)},getObject:function(){var t=this;Object(o["j"])().then((function(e){200==e.code&&(t.transferData=e.rows)})),Object(s["d"])(this.projectId).then((function(e){if(200==e.code){if(null==e.data)return;t.listUser=e.data,t.listUser.forEach((function(e){t.transferData=t.transferData.filter((function(t){return t.userId!==e.userId}))}))}}))},settransfer:function(){setTimeout((function(){document.querySelectorAll(".el-transfer-panel"),document.querySelector(".el-transfer")}),100)},handleChange:function(t,e,r){},handleclick:function(){var t=this,e={projectId:this.projectId,users:this.multipleSelection};Object(s["a"])(e).then((function(e){200==e.code&&(t.$parent.init(),t.multipleSelection=[],t.centerDialogVisible=!1)}))},clickspan:function(t){var e=[];return t.forEach((function(t){return e.push(t.userId)})),e},handleSelectionChange:function(t){this.multipleSelection=this.clickspan(t)},beforeClose:function(){this.checked=[],this.centerDialogVisible=!1,this.multipleSelection=[]}}},c=i,u=(r("ad4b"),r("2877")),l=Object(u["a"])(c,n,a,!1,null,"ae1cb466",null);e["default"]=l.exports},"4a3f":function(t,e,r){},"4f1c":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("el-form",{staticClass:"demo-form-inline"},[n("el-form-item",[n("el-card",{staticClass:"box-card cardtwo"},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("span",{staticStyle:{"font-size":"22px"}},[n("el-descriptions",{attrs:{title:"项目成员信息"}},[n("template",{slot:"extra"},[n("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["pm:project:user:add"],expression:"['pm:project:user:add']"}],staticStyle:{float:"right"},attrs:{type:"primary",plain:""},on:{click:t.addpeople}},[t._v(" 添加人员 ")])],1),n("el-descriptions-item",{attrs:{label:"项目成员"}},[t._v(" "+t._s(t.peopleTotal)+"人 ")])],2)],1)]),n("div",{staticClass:"text item"},[[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList}},[n("el-table-column",{attrs:{fixed:"",type:"index",prop:"date",label:"序号",width:"60px",align:"center"}}),n("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"119",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[n("div",{staticClass:"userImg"},[n("div",{staticClass:"demo-image"},[""!=t.row.avatar?n("div",{staticClass:"block"},[n("el-image",{attrs:{src:t.row.avatar}})],1):n("div",{staticClass:"block"},[n("el-image",{attrs:{src:r("4b94")}})],1)])])]}}])}),n("el-table-column",{attrs:{prop:"userId",label:"ID",align:"center",width:"80"}}),n("el-table-column",{attrs:{prop:"nickName",label:"姓名",align:"center"}}),n("el-table-column",{attrs:{prop:"joinTime",label:"加入时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("span",[t._v(t._s(t.parseTime(e.row.joinTime)))])]}}])}),n("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(r){return r.preventDefault(),t.deleteRow(e.$index,e.row)}}},[t._v(" 移除 ")])]}}])})],1)]],2)])],1)],1),n("addForm",{ref:"addPeopleForm"})],1)},a=[],s=(r("a434"),r("d3b7"),r("0643"),r("4e3e"),r("159b"),r("b79f")),o=r("49b2"),i={components:{addForm:o["default"]},props:["projectId"],data:function(){return{userList:[]}},watch:{projectId:function(t,e){this.init()}},created:function(){this.init()},computed:{peopleTotal:function(){return this.userList.length}},methods:{init:function(){var t=this;0==this.projectId?this.$message.warning("请先选择项目"):Object(s["d"])(this.projectId).then((function(e){t.userList=e.data,t.userList.forEach((function(t){""!=t.avatar&&(t.avatar="/prod-api"+t.avatar)}))}))},deleteRow:function(t,e){var r=this;this.userList.splice(t,1);var n=[];n=e.userId;var a={projectId:this.projectId,userIds:n};Object(s["c"])(a).then((function(t){200!=t.code?r.$modal.msgError("移除失败，原因为:".concat(t.msg)):r.$modal.msgSuccess("移除成功")}))},addpeople:function(){this.$refs.addPeopleForm.open(),this.$refs.addPeopleForm.projectId=this.projectId}}},c=i,u=(r("760a"),r("2877")),l=Object(u["a"])(c,n,a,!1,null,"3eb3c620",null);e["default"]=l.exports},"6a36":function(t,e,r){},"760a":function(t,e,r){"use strict";r("6a36")},ad4b:function(t,e,r){"use strict";r("4a3f")},b79f:function(t,e,r){"use strict";r.d(e,"b",(function(){return a})),r.d(e,"d",(function(){return s})),r.d(e,"a",(function(){return o})),r.d(e,"c",(function(){return i}));var n=r("b775");function a(t){return Object(n["a"])({url:"/project/user/count?projectId="+t,method:"get"})}function s(t){return Object(n["a"])({url:"/project/user/list?projectId="+t,method:"get"})}function o(t){return Object(n["a"])({url:"/project/user/join",method:"post",data:t})}function i(t){return Object(n["a"])({url:"/project/user/remove",method:"put",params:t})}},c0c7:function(t,e,r){"use strict";r.d(e,"i",(function(){return s})),r.d(e,"f",(function(){return o})),r.d(e,"a",(function(){return i})),r.d(e,"m",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"k",(function(){return l})),r.d(e,"b",(function(){return d})),r.d(e,"h",(function(){return f})),r.d(e,"n",(function(){return p})),r.d(e,"o",(function(){return m})),r.d(e,"p",(function(){return h})),r.d(e,"e",(function(){return b})),r.d(e,"l",(function(){return j})),r.d(e,"d",(function(){return v})),r.d(e,"g",(function(){return g})),r.d(e,"j",(function(){return y}));var n=r("b775"),a=r("c38a");function s(t){return Object(n["a"])({url:"/system/user/list",method:"get",params:t})}function o(t){return Object(n["a"])({url:"/system/user/"+Object(a["e"])(t),method:"get"})}function i(t){return Object(n["a"])({url:"/system/user",method:"post",data:t})}function c(t){return Object(n["a"])({url:"/system/user",method:"put",data:t})}function u(t){return Object(n["a"])({url:"/system/user/"+t,method:"delete"})}function l(t,e){var r={userId:t,password:e};return Object(n["a"])({url:"/system/user/resetPwd",method:"put",data:r})}function d(t,e){var r={userId:t,status:e};return Object(n["a"])({url:"/system/user/changeStatus",method:"put",data:r})}function f(){return Object(n["a"])({url:"/system/user/profile",method:"get"})}function p(t){return Object(n["a"])({url:"/system/user/profile",method:"put",data:t})}function m(t,e){var r={oldPassword:t,newPassword:e};return Object(n["a"])({url:"/system/user/profile/updatePwd",method:"put",params:r})}function h(t){return Object(n["a"])({url:"/system/user/profile/avatar",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})}function b(t){return Object(n["a"])({url:"/system/user/authRole/"+t,method:"get"})}function j(t){return Object(n["a"])({url:"/system/user/authRole",method:"put",params:t})}function v(){return Object(n["a"])({url:"/system/user/deptTree",method:"get"})}function g(){return Object(n["a"])({url:"/system/user/userInfo",method:"get"})}function y(t){return Object(n["a"])({url:"/system/user/querySelect",method:"get",params:t})}}}]);