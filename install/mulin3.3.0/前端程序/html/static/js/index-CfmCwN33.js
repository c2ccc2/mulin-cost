import{P as b,g as W,a as $,b as j}from"./PanelGroup-Ckcccp0d.js";import q from"./LineChart-DeNhkdR6.js";import B from"./PieChart-D0HbONuq.js";import N from"./PersonChart-DHP9-6cV.js";import{_ as O,e as z,r as d,w as E,B as L,V as U,f as u,c as I,o as G,i as l,h as n,j as o,p as m}from"./index-DOTrAPYh.js";import"./index-Bb6yjXMn.js";const R={class:"dashboard-editor-container"},T={class:"query-container"},A={class:"query-controls"},F={class:"query-tips"},J={class:"chart-wrapper"},K={class:"chart-wrapper"},Q={__name:"index",setup(S){const{proxy:s}=z(),e=d({startDate:"",endDate:""}),r=d({lineChart:"350px",pieChart:"350px",personChart:"350px"}),h=d({}),D=d({}),v=d({});function f(){console.log("initCurrentWeek");const a=s.$moment().startOf("week"),t=s.$moment().endOf("week");e.value.startDate=a.format("YYYY-MM-DD"),e.value.endDate=t.format("YYYY-MM-DD"),console.log("init end")}function _(){const a=window.innerHeight;a>=2160?r.value={lineChart:"500px",pieChart:"500px",personChart:"500px"}:a>=1440?r.value={lineChart:"400px",pieChart:"400px",personChart:"400px"}:a>=1080?r.value={lineChart:"310px",pieChart:"350px",personChart:"350px"}:r.value={lineChart:"200px",pieChart:"260px",personChart:"260px"}}function M(){if(!e.value.startDate)return;const a=s.$moment(e.value.startDate).subtract(7,"days"),t=s.$moment(e.value.endDate).subtract(7,"days");e.value.startDate=a.format("YYYY-MM-DD"),e.value.endDate=t.format("YYYY-MM-DD"),i()}function y(){f(),i()}function k(){if(!e.value.startDate)return;const a=s.$moment(e.value.startDate).add(7,"days"),t=s.$moment(e.value.endDate).add(7,"days");e.value.startDate=a.format("YYYY-MM-DD"),e.value.endDate=t.format("YYYY-MM-DD"),i()}function w(){const a={startDate:e.value.startDate,endDate:e.value.endDate};W({params:a}).then(t=>{h.value=t.data})}function H(){const a={startDate:e.value.startDate,endDate:e.value.endDate};$({params:a}).then(t=>{D.value=t.data})}function P(){const a={startDate:e.value.startDate,endDate:e.value.endDate};j({params:a}).then(t=>{v.value=t.data})}function i(){w(),H(),P()}E([()=>e.value.startDate,()=>e.value.endDate],()=>{e.value.startDate&&e.value.endDate&&i()});function Y(){_()}return L(()=>{_(),window.addEventListener("resize",Y),f(),i()}),U(()=>{window.removeEventListener("resize",Y)}),(a,t)=>{const x=u("el-date-picker"),p=u("el-button"),V=u("el-alert"),g=u("el-row"),C=u("el-col");return G(),I("div",R,[t[5]||(t[5]=l("div",{class:"panel-title"},"数据统计总览",-1)),n(b),n(g,{style:{background:"#fff",padding:"16px 16px 0","margin-bottom":"32px"}},{default:o(()=>[l("div",T,[l("div",A,[n(x,{modelValue:e.value.startDate,"onUpdate:modelValue":t[0]||(t[0]=c=>e.value.startDate=c),type:"date",placeholder:"开始时间",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),n(x,{modelValue:e.value.endDate,"onUpdate:modelValue":t[1]||(t[1]=c=>e.value.endDate=c),type:"date",placeholder:"结束时间",format:"YYYY-MM-DD","value-format":"YYYY-MM-DD",style:{width:"200px","margin-right":"10px"}},null,8,["modelValue"]),n(p,{type:"",style:{"margin-right":"10px"},onClick:M},{default:o(()=>t[2]||(t[2]=[m("向前")])),_:1,__:[2]}),n(p,{type:"",style:{"margin-right":"10px"},onClick:y},{default:o(()=>t[3]||(t[3]=[m("本周")])),_:1,__:[3]}),n(p,{type:"",onClick:k},{default:o(()=>t[4]||(t[4]=[m("向后")])),_:1,__:[4]})]),l("div",F,[n(V,{type:"info",title:"请选择日期范围进行数据查询",closable:!1,"show-icon":""})])]),n(q,{"chart-data":h.value,height:r.value.lineChart},null,8,["chart-data","height"])]),_:1}),n(g,{gutter:32},{default:o(()=>[n(C,{xs:24,sm:24,lg:12},{default:o(()=>[l("div",J,[n(B,{"chart-data":D.value,height:r.value.pieChart},null,8,["chart-data","height"])])]),_:1}),n(C,{xs:24,sm:24,lg:12},{default:o(()=>[l("div",K,[n(N,{"chart-data":v.value,height:r.value.personChart},null,8,["chart-data","height"])])]),_:1})]),_:1})])}}},re=O(Q,[["__scopeId","data-v-c77343da"]]);export{re as default};
