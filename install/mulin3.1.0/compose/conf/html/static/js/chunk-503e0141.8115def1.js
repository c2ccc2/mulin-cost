(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-503e0141","chunk-e412b6ee","chunk-20d58d1e"],{"1a07":function(e,t,a){"use strict";a.d(t,"a",(function(){return i})),a.d(t,"g",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return s})),a.d(t,"e",(function(){return u})),a.d(t,"f",(function(){return c})),a.d(t,"c",(function(){return d}));a("99af");var r=a("b775"),l=a("c38a");function i(e){return Object(r["a"])({url:"/mh/hour/day/create",method:"post",data:e})}function n(e){return Object(r["a"])({url:"/mh/hour/day/edit",method:"put",data:e})}function o(e){return Object(r["a"])({url:"/mh/hour/day/"+Object(l["e"])(e),method:"get"})}function s(e){return Object(r["a"])({url:"/mh/hour/day/"+e,method:"delete"})}function u(e,t){return Object(r["a"])({url:"/mh/hour/day/list?endDate=".concat(t,"&startDate=").concat(e),method:"get"})}function c(e){return Object(r["a"])({url:"/mh/hour/day/query",method:"get",params:e})}function d(){return Object(r["a"])({url:"/mh/hour/day/fillStatus",method:"get"})}},2257:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"b",(function(){return n}));var r=a("b775");a("c38a");function l(e){return Object(r["a"])({url:"/project/hour/detail?hourId="+e,method:"get"})}function i(e){return Object(r["a"])({url:"/project/hour/count?projectId="+e,method:"get"})}function n(e){return Object(r["a"])({url:"/project/hour/list",method:"get",params:e})}},"25f8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"queryForm",attrs:{model:e.queryParams,size:"small",inline:!0,"label-width":"68px"}},[a("el-form-item",{attrs:{label:"",prop:"projectName"}},[a("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期",editable:!1},model:{value:e.queryParams.fillDate,callback:function(t){e.$set(e.queryParams,"fillDate",t)},expression:"queryParams.fillDate"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请输入用户名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toQuery(t)}},model:{value:e.queryParams.userName,callback:function(t){e.$set(e.queryParams,"userName",t)},expression:"queryParams.userName"}})],1),a("el-form-item",[a("el-input",{staticStyle:{width:"200px","margin-left":"10px"},attrs:{placeholder:"请输入姓名",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.toQuery(t)}},model:{value:e.queryParams.nickName,callback:function(t){e.$set(e.queryParams,"nickName",t)},expression:"queryParams.nickName"}})],1),a("el-form-item",[a("el-select",{staticStyle:{width:"240px"},attrs:{placeholder:"状态",clearable:""},model:{value:e.queryParams.reviewStatus,callback:function(t){e.$set(e.queryParams,"reviewStatus",t)},expression:"queryParams.reviewStatus"}},[a("el-option",{attrs:{label:"待审核",value:"0"}}),a("el-option",{attrs:{label:"已通过",value:"1"}}),a("el-option",{attrs:{label:"已驳回",value:"-1"}}),a("el-option",{attrs:{label:"全部",value:""}})],1)],1),a("el-form-item",[a("span",{staticClass:"btns"},[a("el-button",{on:{click:e.toQuery}},[e._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh",size:"small"},on:{click:e.resetQuery}},[e._v(" 重置 ")])],1)])],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"grid-content"},[[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.list,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center"}}),a("el-table-column",{attrs:{prop:"fillDate",label:"日期",align:"center",width:"100"}}),a("el-table-column",{attrs:{prop:"hour",label:"总填报",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.totalHour)+" 小时 ")]}}])}),a("el-table-column",{attrs:{prop:"hour",label:"项目工时",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.workHour)+" 小时 ")]}}])}),a("el-table-column",{attrs:{prop:"hour",label:"普通工时",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.otherHour)+" 小时 ")]}}])}),a("el-table-column",{attrs:{prop:"reviewStatus",label:"审核状态",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",["0"==t.row.reviewStatus?a("el-tag",[e._v(" 待审核 ")]):"1"==t.row.reviewStatus?a("el-tag",{attrs:{type:"success"}},[e._v(" 已通过 ")]):"-1"==t.row.reviewStatus?a("el-tag",{attrs:{type:"danger"}},[e._v(" 已驳回 ")]):e._e()],1)]}}])}),a("el-table-column",{attrs:{prop:"userName",label:"用户名",align:"center"}}),a("el-table-column",{attrs:{prop:"nickName",label:"姓名",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"填报时间",align:"center",width:"162"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"230"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.reviewStatus?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["mh:day:review:set"],expression:"['mh:day:review:set']"}],attrs:{size:"small"},on:{click:function(a){return e.handlePass(t.row,1,t.$index)}}},[e._v(" 通过 ")]):e._e(),0==t.row.reviewStatus?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["mh:day:review:set"],expression:"['mh:day:review:set']"}],attrs:{size:"small"},on:{click:function(a){return e.handleReject(t.row,-1,t.$index)}}},[e._v(" 驳回 ")]):e._e(),a("el-button",{attrs:{size:"small"},on:{click:function(a){return e.handleInfo(t.row,t.$index)}}},[e._v(" 详情 ")])]}}])})],1),a("pagination",{directives:[{name:"show",rawName:"v-show",value:e.total>0,expression:"total > 0"}],attrs:{total:e.total,page:e.queryParams.pageNum,limit:e.queryParams.pageSize},on:{"update:page":function(t){return e.$set(e.queryParams,"pageNum",t)},"update:limit":function(t){return e.$set(e.queryParams,"pageSize",t)},pagination:e.getList}})]],2)])],1),a("el-dialog",{attrs:{title:"审核",visible:e.reviewDialog,width:"30%","before-close":e.handleReviewClose},on:{"update:visible":function(t){e.reviewDialog=t}}},[a("el-form",{ref:"form"},[a("el-form-item",[a("el-select",{staticStyle:{"margin-left":"1px"},attrs:{placeholder:"审批结果"},on:{change:function(t){return e.$forceUpdate()}},model:{value:e.reviewResult.resultId,callback:function(t){e.$set(e.reviewResult,"resultId",t)},expression:"reviewResult.resultId"}},[a("el-option",{attrs:{label:"通过",value:1}}),a("el-option",{attrs:{label:"驳回",value:-1}})],1)],1),a("el-form-item",[a("el-input",{staticStyle:{"margin-top":"5px"},attrs:{type:"textarea",maxlength:"50",autosize:{minRows:2,maxRows:6},"show-word-limit":"",placeholder:"原因"},model:{value:e.reviewResult.remark,callback:function(t){e.$set(e.reviewResult,"remark",t)},expression:"reviewResult.remark"}})],1),a("el-form-item",[a("div",{attrs:{align:"center"}},[a("el-button",{style:{width:"120px"},attrs:{size:"small"},on:{click:e.handleReviewClose}},[e._v(" 关闭 ")]),a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["dayHour:review:set"],expression:"['dayHour:review:set']"}],style:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:e.handleSubmitReview}},[e._v(" 提交 ")])],1)])],1)],1),e.infoDialog?a("el-dialog",{attrs:{title:"详情",visible:e.infoDialog,"destroy-on-close":"","before-close":e.handleInfoClose},on:{"update:visible":function(t){e.infoDialog=t}}},[a("dayDetail",{ref:"dayDetail"}),a("div",{attrs:{align:"center"}},[a("el-button",{style:{width:"120px"},attrs:{size:"small"},on:{click:e.handleInfoClose}},[e._v(" 关闭 ")]),1!=e.infoStatus?a("el-button",{directives:[{name:"hasPermi",rawName:"v-hasPermi",value:["dayHour:review:set"],expression:"['dayHour:review:set']"}],style:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:e.handleInfoReview}},[e._v(" 审核 ")]):e._e()],1)],1):e._e()],1)},l=[],i=a("39c4"),n=a("d920"),o=a("8c26"),s={name:"dayHourReview",components:{dayDetail:n["default"],dayReviewList:o["default"]},data:function(){return{total:0,queryParams:{pageNum:1,pageSize:10,userName:void 0,nickName:void 0,reviewStatus:"0",localDate:""},list:[],reviewDialog:!1,reviewResult:{id:null,hourId:null,resultId:null,remark:""},infoDialog:!1,infoId:null,infoStatus:null}},watch:{},mounted:function(){},created:function(){this.getList()},methods:{getList:function(){var e=this;this.loading=!0,Object(i["b"])(this.queryParams).then((function(t){200==t.code&&(e.list=t.rows,e.total=t.total)})).catch((function(e){console.log(e)}))},toQuery:function(){this.queryParams.pageNum=1,this.getList()},resetQuery:function(){this.queryParams={pageNum:1,pageSize:10,userName:void 0,nickName:void 0,reviewStatus:"0",localDate:""},this.getList()},handlePass:function(e,t,a){var r=this;console.log("row",e);var l={id:e.id,resultId:t,remark:""};Object(i["c"])(l).then((function(e){200==e.code&&(r.$message.success("审核完毕"),r.list[a].reviewStatus=t)})).catch((function(e){console.log(e)}))},handleReject:function(e,t,a){this.reviewResult.id=e.id,this.reviewResult.resultId=t,this.reviewResult.index=a,this.reviewResult.remark=null,this.reviewDialog=!0},handleSubmitReview:function(){var e=this,t=this.reviewResult.index;Object(i["c"])(this.reviewResult).then((function(a){200==a.code&&(e.$message.success("审核完毕"),e.list[t].reviewStatus=e.reviewResult.resultId,e.handleReviewClose(),e.handleInfoClose())})).catch((function(e){console.log(e)}))},handleReviewClose:function(){this.reviewDialog=!1},handleInfo:function(e,t){var a=this;this.infoId=e.id,this.infoStatus=e.reviewStatus,this.index=t,this.infoDialog=!0,this.$nextTick((function(){a.$refs.dayDetail&&(a.$refs.dayDetail.id=e.id,a.$refs.dayDetail.open())}))},handleInfoReview:function(){this.reviewResult.id=this.infoId,this.reviewResult.index=this.index,this.reviewResult.remark=null,this.reviewDialog=!0},handleInfoClose:function(){this.index=null,this.infoDialog=!1}}},u=s,c=(a("79d0"),a("2877")),d=Object(c["a"])(u,r,l,!1,null,"1a47fcab",null);t["default"]=d.exports},"26b8":function(e,t,a){"use strict";a("a977")},"39c4":function(e,t,a){"use strict";a.d(t,"b",(function(){return l})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return n}));var r=a("b775");function l(e){return Object(r["a"])({url:"/mh/review/day/list",method:"get",params:e})}function i(e){return Object(r["a"])({url:"/mh/review/day/detail?hourId="+e,method:"get"})}function n(e){return Object(r["a"])({url:"/mh/review/day/audit",method:"post",data:e})}},"79d0":function(e,t,a){"use strict";a("d9f5a")},"8c26":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-card",[a("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[a("span",{staticClass:"title"},[e._v("审核记录")])]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.reviewList}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"55",align:"center"}}),a("el-table-column",{attrs:{prop:"createTime",label:"审核时间",align:"center",width:"160"}}),a("el-table-column",{attrs:{prop:"status",label:"审核结果",align:"center",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?a("el-tag",{attrs:{type:"success"}},[e._v(" 通过 ")]):-1==t.row.status?a("el-tag",{attrs:{type:"danger"}},[e._v(" 驳回 ")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"remark",label:"审核意见",align:"center"}}),a("el-table-column",{attrs:{prop:"createName",label:"审核人",width:"90",align:"center"}})],1)],1)],1)},l=[],i=a("39c4"),n={name:"dayHourReviewList",data:function(){return{reviewList:[]}},props:["id"],created:function(){this.getList()},methods:{getList:function(){var e=this;Object(i["a"])(this.id).then((function(t){e.reviewList=t.data}))}}},o=n,s=a("2877"),u=Object(s["a"])(o,r,l,!1,null,null,null);t["default"]=u.exports},a977:function(e,t,a){},c194:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return i}));var r=a("b775");a("c38a");function l(e){return Object(r["a"])({url:"/mh/hour/other/detail?hourId=".concat(e),method:"get"})}function i(e){return Object(r["a"])({url:"/mh/hour/other/query",method:"get",params:e})}},d920:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form",{ref:"form",attrs:{"label-width":"80px"}},[a("el-form-item",[a("el-descriptions",{attrs:{title:"信息",column:2}},[a("el-descriptions-item",{attrs:{label:"填报日期"}},[e._v(" "+e._s(this.info.fillDate)+" ")]),a("el-descriptions-item",{attrs:{label:"提交时间"}},[e._v(e._s(this.info.createTime))])],1)],1),a("el-form-item",[a("div",{staticClass:"el-descriptions__title",staticStyle:{"text-align":"left"}},[e._v(" 工时总计 ")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.info]}},[a("el-table-column",{attrs:{prop:"projectHour",label:"项目工时",align:"center"}},[a("span",[e._v(e._s(e.info.workHour||0)+"小时")])]),a("el-table-column",{attrs:{prop:"otherHour",label:"其他工时",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.info.otherHour||0)+"小时")])]}}])}),a("el-table-column",{attrs:{prop:"totalHour",label:"总计",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.info.totalHour)+"小时")])]}}])})],1)],1),a("el-form-item",[a("div",{staticClass:"el-descriptions__title",staticStyle:{"text-align":"left"}},[e._v(" 项目工时 ")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.projectHours}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"projectName",label:"项目名称",width:"260"}}),a("el-table-column",{attrs:{prop:"hour",label:"工时",width:"80 ",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.hour)+"小时")])]}}])}),a("el-table-column",{attrs:{prop:"daily",label:"工作内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.daily?t.row.daily:"无"))])]}}])})],1)],1),a("el-form-item",[a("div",{staticClass:"el-descriptions__title",staticStyle:{"text-align":"left"}},[e._v(" 其他工时 ")]),a("el-table",{staticStyle:{width:"100%"},attrs:{data:[e.otherHour]}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),a("el-table-column",{attrs:{prop:"otherHour",label:"工时",width:"260",align:" center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.hour||0)+"小时")])]}}])}),a("el-table-column",{attrs:{prop:"daily",label:"工作内容",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.daily||"无"))])]}}])})],1)],1),a("el-form-item",[1==e.info.reviewType?a("dayReviewList",{attrs:{id:e.id}}):e._e()],1)],1)],1)],1)],1)},l=[],i=a("5530"),n=a("1a07"),o=a("2257"),s=a("c194"),u=a("8c26"),c={components:{dayReviewList:u["default"]},data:function(){return{dailyDialog:!1,id:0,info:{},projectHours:[],otherHour:{}}},created:function(){},methods:{open:function(){this.dailyDialog=!0,this.getDetail(),this.getProject(),this.getOther()},getDetail:function(){var e=this;Object(n["d"])(this.id).then((function(t){200==t.code&&(e.info=t.data)}))},getProject:function(){var e=this;Object(o["c"])(this.id).then((function(t){200==t.code&&(e.projectHours=t.data)}))},getOther:function(){var e=this;Object(s["a"])(this.id).then((function(t){200==t.code&&(e.otherHour=Object(i["a"])({hour:0,daily:""},t.data))}))},handleViewCannel:function(){this.dailyDialog=!1}}},d=c,f=(a("26b8"),a("2877")),m=Object(f["a"])(d,r,l,!1,null,"ef51445c",null);t["default"]=m.exports},d9f5a:function(e,t,a){}}]);