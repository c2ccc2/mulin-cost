import{_ as j,r as p,w as I,B as h,f as r,c as w,o as x,h as t,j as c,i as u,D as y,G as V,p as Y}from"./index-DOTrAPYh.js";import{a as N}from"./projectHour-DaHsWXCm.js";const k={class:"main"},M={class:"clearfix"},S={class:"btns"},B={class:"text item"},U={__name:"hour",props:{projectId:{type:String,required:!0}},setup(v){const s=v,e=p({pageNum:1,pageSize:10,startDate:"",endDate:"",projectId:""}),m=p([]),i=p(0);I(()=>s.projectId,o=>{o&&(e.value.projectId=o,d())});const d=async()=>{if(s.projectId)try{e.value.projectId=s.projectId;const o=await N(e.value);o.code===200&&(m.value=o.data.rows||[],i.value=o.data.total||0)}catch(o){console.error("获取工时记录失败:",o)}};return h(()=>{s.projectId&&(e.value.projectId=s.projectId,d())}),(o,a)=>{const _=r("el-date-picker"),f=r("el-button"),n=r("el-table-column"),g=r("el-table"),b=r("pagination"),D=r("el-card");return x(),w("div",k,[t(D,{class:"box-card"},{header:c(()=>[u("div",M,[t(_,{modelValue:e.value.startDate,"onUpdate:modelValue":a[0]||(a[0]=l=>e.value.startDate=l),"value-format":"YYYY-MM-DD",placeholder:"开始时间",editable:!1,class:"date"},null,8,["modelValue"]),t(_,{modelValue:e.value.endDate,"onUpdate:modelValue":a[1]||(a[1]=l=>e.value.endDate=l),"value-format":"YYYY-MM-DD",placeholder:"结束时间",editable:!1,class:"date"},null,8,["modelValue"]),u("span",S,[t(f,{onClick:d},{default:c(()=>a[4]||(a[4]=[Y("查询")])),_:1,__:[4]})])])]),default:c(()=>[u("div",B,[t(g,{data:m.value,style:{width:"100%"},border:""},{default:c(()=>[t(n,{type:"index",label:"序号",width:"60",align:"center"}),t(n,{label:"日期",width:"119",prop:"fillDate",align:"center"}),t(n,{label:"人员",prop:"nickName",align:"center"}),t(n,{label:"工时",width:"130",prop:"hour",align:"center"}),t(n,{label:"工作内容",prop:"daily",align:"center"}),t(n,{label:"上报时间",prop:"createTime",align:"center"})]),_:1},8,["data"]),y(t(b,{total:i.value,page:e.value.pageNum,"onUpdate:page":a[2]||(a[2]=l=>e.value.pageNum=l),limit:e.value.pageSize,"onUpdate:limit":a[3]||(a[3]=l=>e.value.pageSize=l),onPagination:d},null,8,["total","page","limit"]),[[V,i.value>0]])])]),_:1})])}}},H=j(U,[["__scopeId","data-v-d5cc4b74"]]);export{H as default};
