(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-480b1ec5","chunk-c9298422","chunk-801f4f58","chunk-a7496e14","chunk-21fc3963","chunk-5a460426"],{2257:function(t,e,n){"use strict";n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return s}));var r=n("b775");n("c38a");function a(t){return Object(r["a"])({url:"/project/hour/detail?hourId="+t,method:"get"})}function o(t){return Object(r["a"])({url:"/project/hour/count?projectId="+t,method:"get"})}function s(t){return Object(r["a"])({url:"/project/hour/list",method:"get",params:t})}},"2c95":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("el-card",{staticClass:"box-card cardtwo"},[n("el-form",{staticClass:"demo-form-inline",attrs:{"label-position":"top"}},[n("el-form-item",{attrs:{label:"项目状态"}},[n("div",{staticClass:"content"},[t.info.enable?n("span",[n("el-tag",{attrs:{type:"success"}},[t._v("进行中")])],1):n("span",[n("el-tag",{attrs:{type:"info"}},[t._v("已停止")])],1),n("span",{staticStyle:{"margin-left":"20px"}},[t.info.enable?n("el-button",{attrs:{size:"mini",type:"info"},on:{click:t.handleEnable}},[t._v(" 停止项目 ")]):n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:t.handleEnable}},[t._v(" 启动项目 ")])],1),n("el-divider")],1)]),n("el-form-item",{attrs:{label:"删除项目"}},[n("div",{staticClass:"content"},[n("el-button",{attrs:{type:"danger",plain:"",size:"mini"},on:{click:t.handleDelete}},[t._v(" 删除项目 ")])],1)])],1)],1)],1)},a=[],o=(n("14d9"),n("4fee")),s={components:{},props:["projectId"],data:function(){return{info:{enable:!0}}},watch:{projectId:function(t,e){this.init()}},created:function(){this.init()},computed:{},methods:{init:function(){var t=this;0==this.projectId?this.$message.warning("请先选择项目"):Object(o["d"])(this.projectId).then((function(e){t.info=e.data}))},handleEnable:function(){var t=this,e={projectId:this.projectId,enable:!this.info.enable};Object(o["c"])(e).then((function(e){if(200==e.code)return t.$modal.msgSuccess("设置成功"),void t.init();t.$modal.msgError("设置失败，原因为:".concat(e.msg))}))},handleDelete:function(){var t=this;Object(o["b"])(this.projectId).then((function(e){200==e.code?(t.$modal.msgSuccess("删除成功"),t.$router.push("/project/list")):t.$modal.msgError("删除失败，原因为:".concat(e.msg))}))}}},i=s,c=(n("cf36"),n("2877")),l=Object(c["a"])(i,r,a,!1,null,"4de2b071",null);e["default"]=l.exports},"2c96":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("el-form",{staticClass:"demo-form-inline"},[n("el-form-item",[n("el-row",[n("el-col",{staticClass:"card-box",attrs:{span:12}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("项目简介")])]),n("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[n("div",{staticClass:"content"},[n("span",[t._v("项目名称:")]),n("span",[t._v(t._s(t.info.projectName))])]),n("div",{staticClass:"content"},[t.info.enable?n("span",[t._v("项目状态: "),n("el-tag",{attrs:{type:"success"}},[t._v("启动状态")])],1):n("span",[t._v("项目状态: "),n("el-tag",{attrs:{type:"info"}},[t._v("暂停状态")])],1)]),n("div",{staticClass:"content"},[n("span",[t._v("项目简介:")]),n("span",[t._v(t._s(t.info.remark))])]),n("div",{staticClass:"content"},[n("span",[t._v("项目经理:"+t._s(t.info.projectManagerName))])]),n("div",{staticClass:"content"},[n("span",[t._v("创建时间:"+t._s(t.info.createTime))])])])])],1),n("el-col",{staticClass:"card-box",attrs:{span:12}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("成员数量")])]),n("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[n("div",{staticClass:"detailText"},[t._v(" "+t._s(t.userCount)+" 人"),n("br")])])])],1),n("el-col",{staticClass:"card-box",attrs:{span:12}},[n("el-card",[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("工时投入")]),n("span",{staticClass:"rbtn"})]),n("div",{staticClass:"el-table el-table--enable-row-hover el-table--medium"},[n("div",{staticClass:"detailText"},[t._v(" 已用:"+t._s(this.useHour||0)+" 小时 合计 "+t._s(null!=this.useHour?(this.useHour/8).toFixed(2):0)+" 人天"),n("br")])])])],1)],1)],1)],1)],1)},a=[],o=n("4fee"),s=n("2257"),i=n("b79f"),c={components:{},props:["projectId"],data:function(){return{info:{},useHour:0,userCount:0}},watch:{projectId:function(t,e){this.init()}},created:function(){this.init()},methods:{init:function(){0==this.projectId?this.$message.warning("请先选择项目"):this.getInfo()},getInfo:function(){var t=this;Object(o["d"])(this.projectId).then((function(e){t.info=e.data})),Object(i["b"])(this.projectId).then((function(e){t.userCount=e.data})),Object(s["a"])(this.projectId).then((function(e){200==e.code&&(t.useHour=e.data)}))}}},l=c,u=(n("f625"),n("2877")),d=Object(u["a"])(l,r,a,!1,null,"7732f0dc",null);e["default"]=d.exports},3114:function(t,e,n){"use strict";n("e605")},"371b":function(t,e,n){},"3a05":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("el-card",{staticClass:"box-card "},[n("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[n("el-date-picker",{staticClass:"date",attrs:{"value-format":"yyyy-MM-dd",placeholder:"开始时间",editable:!1},model:{value:t.queryParams.startDate,callback:function(e){t.$set(t.queryParams,"startDate",e)},expression:"queryParams.startDate"}}),n("el-date-picker",{staticClass:"date",attrs:{"value-format":"yyyy-MM-dd",placeholder:"结束时间",editable:!1},model:{value:t.queryParams.endDate,callback:function(e){t.$set(t.queryParams,"endDate",e)},expression:"queryParams.endDate"}}),n("span",{staticClass:"btns"},[n("el-button",{on:{click:t.toQuery}},[t._v("查询")])],1)],1),n("div",{staticClass:"text item"},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userHourList,border:""}},[n("el-table-column",{attrs:{type:"index",label:"序号",width:"60px",align:"center"}}),n("el-table-column",{attrs:{label:"日期",width:"119",prop:"fillDate",align:"center"}}),n("el-table-column",{attrs:{label:"人员",prop:"nickName",align:"center"}}),n("el-table-column",{attrs:{label:"工时",width:"130",prop:"hour",align:"center"}}),n("el-table-column",{attrs:{label:"工作内容",prop:"daily",align:"center"}}),n("el-table-column",{attrs:{label:"上报时间",prop:"createTime",align:"center"}})],1),n("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total > 0"}],attrs:{total:t.total,page:t.queryParams.pageNum,limit:t.queryParams.pageSize},on:{"update:page":function(e){return t.$set(t.queryParams,"pageNum",e)},"update:limit":function(e){return t.$set(t.queryParams,"pageSize",e)},pagination:t.toQuery}})],1)])],1)},a=[],o=n("2257"),s={components:{},props:["projectId"],data:function(){return{total:0,queryParams:{startDate:null,endDate:null,pageNum:1,pageSize:10},userHourList:[]}},watch:{projectId:function(t,e){this.init()}},created:function(){this.init()},computed:{},methods:{init:function(){0==this.projectId?this.$message.warning("请先选择项目"):(this.queryParams.projectId=this.projectId,this.getList())},getList:function(){var t=this;Object(o["b"])(this.queryParams).then((function(e){200==e.code&&(console.log("res:",e),t.total=e.data.total,t.userHourList=e.data.rows)}))},toQuery:function(){this.getList()},changeDate:function(){console.log("修改了时间")},resetQuery:function(){}}},i=s,c=(n("6ddc"),n("2877")),l=Object(c["a"])(i,r,a,!1,null,"47531972",null);e["default"]=l.exports},"49b2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("el-dialog",{attrs:{title:"添加人员",visible:t.centerDialogVisible,width:"36%",center:""},on:{"update:visible":function(e){t.centerDialogVisible=e},close:t.beforeClose}},[[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.transferData.filter((function(e){return!t.search||e.nickName.toLowerCase().includes(t.search.toLowerCase())}))},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"index",label:"序号"}}),n("el-table-column",{attrs:{label:"用户名",prop:"userName"}}),n("el-table-column",{attrs:{label:"姓名",prop:"nickName"}}),n("el-table-column",{attrs:{prop:"email"}},[n("template",{slot:"header"},[n("el-input",{attrs:{size:"mini",clearable:"",placeholder:"输入姓名搜索"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],2),n("el-table-column",{attrs:{type:"selection",align:"center"}})],1)],n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.beforeClose}},[t._v("取 消")]),n("el-button",{attrs:{type:"primary"},on:{click:t.handleclick}},[t._v("确认添加")])],1)],2)],1)},a=[],o=(n("4de4"),n("14d9"),n("d3b7"),n("0643"),n("2382"),n("4e3e"),n("159b"),n("b79f")),s=n("c0c7"),i={data:function(){this.$createElement;return{centerDialogVisible:!1,projectId:"",transferData:[],search:"",multipleSelection:[],checked:[],renderFunc:function(t,e){return t("span",[e.key," - ",e.label])},filterMethod:function(t,e){return e.nickName.indexOf(t)>-1},listUser:[]}},created:function(){},methods:{open:function(){var t=this;setTimeout((function(){t.settransfer(),t.getObject(),t.centerDialogVisible=!0}),100)},getObject:function(){var t=this;Object(s["j"])().then((function(e){200==e.code&&(t.transferData=e.rows,console.log("res",e))})),Object(o["d"])(this.projectId).then((function(e){if(console.log(e),200==e.code){if(null==e.data)return;t.listUser=e.data,t.listUser.forEach((function(e){t.transferData=t.transferData.filter((function(t){return t.id!==e.userId}))}))}}))},settransfer:function(){setTimeout((function(){document.querySelectorAll(".el-transfer-panel"),document.querySelector(".el-transfer")}),100)},handleChange:function(t,e,n){},handleclick:function(){var t=this,e={projectId:this.projectId,users:this.multipleSelection};Object(o["a"])(e).then((function(e){200==e.code&&(t.$parent.init(),t.multipleSelection=[],t.centerDialogVisible=!1)}))},clickspan:function(t){var e=[];return t.forEach((function(t){return e.push(t.userId)})),e},handleSelectionChange:function(t){this.multipleSelection=this.clickspan(t)},beforeClose:function(){this.checked=[],this.centerDialogVisible=!1,this.multipleSelection=[]}}},c=i,l=(n("4b5c"),n("2877")),u=Object(l["a"])(c,r,a,!1,null,"aa998314",null);e["default"]=u.exports},"4b5c":function(t,e,n){"use strict";n("be93")},"4f1c":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("el-form",{staticClass:"demo-form-inline"},[r("el-form-item",[r("el-card",{staticClass:"box-card cardtwo"},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticStyle:{"font-size":"22px"}},[r("el-descriptions",{attrs:{title:"项目成员信息"}},[r("template",{slot:"extra"},[r("el-button",{staticStyle:{float:"right"},attrs:{type:"primary",plain:""},on:{click:t.addpeople}},[t._v(" 添加人员 ")])],1),r("el-descriptions-item",{attrs:{label:"项目成员"}},[t._v(" "+t._s(t.peopleTotal)+"人 ")])],2)],1)]),r("div",{staticClass:"text item"},[[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.userList}},[r("el-table-column",{attrs:{fixed:"",type:"index",prop:"date",label:"序号",width:"60px",align:"center"}}),r("el-table-column",{attrs:{prop:"avatar",label:"头像",width:"119",align:"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("div",{staticClass:"userImg"},[r("div",{staticClass:"demo-image"},[""!=t.row.avatar?r("div",{staticClass:"block"},[r("el-image",{attrs:{src:t.row.avatar}})],1):r("div",{staticClass:"block"},[r("el-image",{attrs:{src:n("4b94")}})],1)])])]}}])}),r("el-table-column",{attrs:{prop:"userId",label:"ID",align:"center",width:"80"}}),r("el-table-column",{attrs:{prop:"nickName",label:"姓名",align:"center"}}),r("el-table-column",{attrs:{prop:"joinTime",label:"加入时间",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v(t._s(t.parseTime(e.row.joinTime)))])]}}])}),r("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){return n.preventDefault(),t.deleteRow(e.$index,e.row)}}},[t._v(" 移除 ")])]}}])})],1)]],2)])],1)],1),r("addForm",{ref:"addPeopleForm"})],1)},a=[],o=(n("a434"),n("d3b7"),n("0643"),n("4e3e"),n("159b"),n("b79f")),s=n("49b2"),i={components:{addForm:s["default"]},props:["projectId"],data:function(){return{userList:[]}},watch:{projectId:function(t,e){this.init()}},created:function(){this.init()},computed:{peopleTotal:function(){return this.userList.length}},methods:{init:function(){var t=this;0==this.projectId?this.$message.warning("请先选择项目"):Object(o["d"])(this.projectId).then((function(e){t.userList=e.data,t.userList.forEach((function(t){""!=t.avatar&&(t.avatar="/prod-api"+t.avatar)}))}))},deleteRow:function(t,e){var n=this;this.userList.splice(t,1);var r=[];r=e.userId;var a={projectId:this.projectId,userIds:r};Object(o["c"])(a).then((function(t){200!=t.code?n.$modal.msgError("移除失败，原因为:".concat(t.msg)):n.$modal.msgSuccess("移除成功")}))},addpeople:function(){this.$refs.addPeopleForm.open(),this.$refs.addPeopleForm.projectId=this.projectId}}},c=i,l=(n("73cc"),n("2877")),u=Object(l["a"])(c,r,a,!1,null,"5fdf5ef7",null);e["default"]=u.exports},"4fee":function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"f",(function(){return o})),n.d(e,"b",(function(){return s})),n.d(e,"d",(function(){return i})),n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return l}));var r=n("b775");function a(t){return Object(r["a"])({url:"/project/create",method:"post",data:t})}function o(t){return Object(r["a"])({url:"/project/list",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/project/remove?projectId="+t,method:"delete"})}function i(t){return Object(r["a"])({url:"/project/"+t,method:"get"})}function c(t){return Object(r["a"])({type:"form",url:"/project/enable",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"put",data:t})}function l(){return Object(r["a"])({url:"/project/myJoin",method:"get"})}},"6ddc":function(t,e,n){"use strict";n("9bff")},"73cc":function(t,e,n){"use strict";n("371b")},"918e":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main"},[n("el-form",{staticClass:"form-inline"},[n("el-form-item",[n("el-select",{staticClass:"nav-project",attrs:{placeholder:"选择项目","value-key":"item.projectId",filterable:""},on:{change:t.changeOption},model:{value:t.projectId,callback:function(e){t.projectId=e},expression:"projectId"}},t._l(t.options,(function(t){return n("el-option",{key:t.projectId,attrs:{label:t.projectName,value:t.projectId+""}})})),1),n("div",{staticClass:"nav"},[n("el-row",[n("el-button",{attrs:{plain:""},on:{click:function(e){return t.handleNav(0)}}},[t._v("项目概要")]),n("el-button",{attrs:{plain:""},on:{click:function(e){return t.handleNav(1)}}},[t._v("工时记录")]),n("el-button",{attrs:{plain:""},on:{click:function(e){return t.handleNav(2)}}},[t._v("项目人员")]),n("el-button",{attrs:{plain:""},on:{click:function(e){return t.handleNav(3)}}},[t._v("状态管理")])],1)],1)],1),n("el-form-item",[0==t.nav?n("info",{ref:"info",attrs:{projectId:t.projectId}}):t._e(),1==t.nav?n("hour",{ref:"manager",attrs:{projectId:t.projectId}}):t._e(),2==t.nav?n("user",{ref:"user",attrs:{projectId:t.projectId}}):t._e(),3==t.nav?n("manager",{ref:"manager",attrs:{projectId:t.projectId}}):t._e()],1)],1)],1)},a=[],o=(n("7db0"),n("d3b7"),n("0643"),n("fffc"),n("4fee")),s=n("2c96"),i=n("4f1c"),c=n("2c95"),l=n("3a05"),u={components:{info:s["default"],user:i["default"],manager:c["default"],hour:l["default"]},data:function(){return{options:[],projectId:0,nav:0}},watch:{nav:function(t,e){this.handleNav(t)}},computed:{projectName:function(){var t=this;if(null==this.options)return"";var e=this.options.find((function(e){return e.projectId==t.projectId}));return null==e?"":e.projectName}},created:function(){this.$route.query.projectId?(this.projectId=this.$route.query.projectId,this.getProject()):this.$message.warning("请先选择项目")},methods:{init:function(){},handleNav:function(t){this.nav=t},changeOption:function(){this.init()},getProject:function(){var t=this;Object(o["f"])().then((function(e){200==e.code&&(t.options=e.rows)}))}}},d=u,f=(n("3114"),n("2877")),p=Object(f["a"])(d,r,a,!1,null,"d0bc477a",null);e["default"]=p.exports},"9bff":function(t,e,n){},b79f:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"d",(function(){return o})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return i}));var r=n("b775");function a(t){return Object(r["a"])({url:"/project/user/count?projectId="+t,method:"get"})}function o(t){return Object(r["a"])({url:"/project/user/list?projectId="+t,method:"get"})}function s(t){return Object(r["a"])({url:"/project/user/join",method:"post",data:t})}function i(t){return Object(r["a"])({url:"/project/user/remove",method:"put",params:t})}},b7cc:function(t,e,n){},be93:function(t,e,n){},c0c7:function(t,e,n){"use strict";n.d(e,"i",(function(){return o})),n.d(e,"f",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"m",(function(){return c})),n.d(e,"c",(function(){return l})),n.d(e,"k",(function(){return u})),n.d(e,"b",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"n",(function(){return p})),n.d(e,"o",(function(){return m})),n.d(e,"p",(function(){return h})),n.d(e,"e",(function(){return b})),n.d(e,"l",(function(){return v})),n.d(e,"d",(function(){return j})),n.d(e,"g",(function(){return g})),n.d(e,"j",(function(){return y}));var r=n("b775"),a=n("c38a");function o(t){return Object(r["a"])({url:"/system/user/list",method:"get",params:t})}function s(t){return Object(r["a"])({url:"/system/user/"+Object(a["e"])(t),method:"get"})}function i(t){return Object(r["a"])({url:"/system/user",method:"post",data:t})}function c(t){return Object(r["a"])({url:"/system/user",method:"put",data:t})}function l(t){return Object(r["a"])({url:"/system/user/"+t,method:"delete"})}function u(t,e){var n={userId:t,password:e};return Object(r["a"])({url:"/system/user/resetPwd",method:"put",data:n})}function d(t,e){var n={userId:t,status:e};return Object(r["a"])({url:"/system/user/changeStatus",method:"put",data:n})}function f(){return Object(r["a"])({url:"/system/user/profile",method:"get"})}function p(t){return Object(r["a"])({url:"/system/user/profile",method:"put",data:t})}function m(t,e){var n={oldPassword:t,newPassword:e};return Object(r["a"])({url:"/system/user/profile/updatePwd",method:"put",params:n})}function h(t){return Object(r["a"])({url:"/system/user/profile/avatar",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:t})}function b(t){return Object(r["a"])({url:"/system/user/authRole/"+t,method:"get"})}function v(t){return Object(r["a"])({url:"/system/user/authRole",method:"put",params:t})}function j(){return Object(r["a"])({url:"/system/user/deptTree",method:"get"})}function g(){return Object(r["a"])({url:"/system/user/userInfo",method:"get"})}function y(t){return Object(r["a"])({url:"/system/user/querySelect",method:"get",params:t})}},cf36:function(t,e,n){"use strict";n("ec59")},e605:function(t,e,n){},ec59:function(t,e,n){},f625:function(t,e,n){"use strict";n("b7cc")}}]);