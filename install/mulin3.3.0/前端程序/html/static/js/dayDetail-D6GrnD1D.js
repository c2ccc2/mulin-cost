import{i as R}from"./day-BW9qJLif.js";import{l as S}from"./projectHour-DaHsWXCm.js";import{i as E}from"./other-DCksgyzN.js";import{d as I}from"./dayReviewList-BjF4Dn5J.js";import{_ as $,e as L,r as m,b as O,f as n,c as d,o as r,h as e,j as t,p as u,t as i,m as o,i as k,k as P,l as U,I as q}from"./index-DOTrAPYh.js";const z={class:"main"},A={key:0},F={key:1},G={key:0},J={key:1},K={key:2},M={key:3},Q={key:2},W={__name:"dayDetail",emits:["commit"],setup(X,{expose:H,emit:Y}){const{proxy:g}=L(),f=m(!1),b=m(void 0),a=m({}),v=m([]),_=m({});m(null),O(()=>a.value.reviewType==1&&a.value.reviewStatus==1);const x=async s=>{if(!s||!s.id){g.$modal.msgError("参数错误");return}b.value=s.id,f.value=!0,await V(s.id)},V=async s=>{try{const c=await R(s);c.code===200&&(a.value=c.data);const l=await S(s);l.code===200&&(v.value=l.data||[]);const y=await E(s);y.code===200&&(_.value=y.data||{})}catch(c){console.error("获取工时详情失败:",c),g.$modal.msgError("获取工时详情失败")}},D=()=>{f.value=!1,b.value=void 0,a.value={},v.value=[],_.value={}};return H({show:x}),(s,c)=>{const l=n("el-descriptions-item"),y=n("el-descriptions"),w=n("el-form-item"),h=n("el-table-column"),T=n("el-table"),j=n("el-form"),B=n("el-col"),C=n("el-row"),N=n("el-dialog");return r(),d("div",z,[e(N,{title:"日报详情",modelValue:o(f),"onUpdate:modelValue":c[0]||(c[0]=p=>q(f)?f.value=p:null),style:{width:"42%",margin:"0 auto"},"before-close":D,"custom-class":"detailDialog"},{default:t(()=>[e(C,null,{default:t(()=>[e(B,{span:24},{default:t(()=>[e(j,{ref:"form","label-width":"80px"},{default:t(()=>[e(w,{label:"信息","label-position":"top"},{default:t(()=>[e(y,{column:2,border:"",style:{width:"100%"}},{default:t(()=>[e(l,{label:"填报日期"},{default:t(()=>[u(i(o(a).fillDate),1)]),_:1}),e(l,{label:"提交时间"},{default:t(()=>[u(i(o(a).createTime),1)]),_:1}),e(l,{label:"工时总计"},{default:t(()=>[u(i(o(a).totalHour?o(a).totalHour:0)+"小时",1)]),_:1}),e(l,{label:"审核状态"},{default:t(()=>[o(a).reviewType==0?(r(),d("span",A,"无需审核")):o(a).reviewType==1?(r(),d("span",F,[o(a).reviewStatus==0?(r(),d("span",G,"待审核")):o(a).reviewStatus==1?(r(),d("span",J,"审核通过")):o(a).reviewStatus==-1?(r(),d("span",K,"已驳回")):(r(),d("span",M,"未知状态"))])):(r(),d("span",Q,"未知"))]),_:1}),e(l,{label:"项目工时"},{default:t(()=>[u(i(o(a).workHour?o(a).workHour:0)+"小时",1)]),_:1}),e(l,{label:"普通工时"},{default:t(()=>[u(i(o(a).otherHour?o(a).otherHour:0)+"小时",1)]),_:1})]),_:1})]),_:1}),e(w,{label:"项目工时","label-position":"top"},{default:t(()=>[e(T,{data:o(v),style:{width:"100%"}},{default:t(()=>[e(h,{type:"index",label:"序号",width:"50",align:"center"}),e(h,{prop:"projectName",label:"项目名称",width:"260"}),e(h,{prop:"hour",label:"工时",width:"80 ",align:"center"},{default:t(p=>[k("span",null,i(p.row.hour)+"小时",1)]),_:1}),e(h,{prop:"daily",label:"工作内容",align:"center"},{default:t(p=>[k("span",null,i(p.row.daily?p.row.daily:"无"),1)]),_:1})]),_:1},8,["data"])]),_:1}),e(w,{label:"普通工时","label-position":"top"},{default:t(()=>[e(y,{column:2,border:"",style:{width:"100%"}},{default:t(()=>[e(l,{label:"工时"},{default:t(()=>[u(i(o(_).hour?o(_).hour:0)+"小时",1)]),_:1}),e(l,{label:"工作内容"},{default:t(()=>[u(i(o(_).daily?o(_).daily:"无"),1)]),_:1})]),_:1})]),_:1}),e(w,{style:{"margin-left":"-80px",width:"calc(100% + 80px)"}},{default:t(()=>[o(a).reviewType==1?(r(),P(I,{key:0,id:o(b)},null,8,["id"])):U("",!0)]),_:1}),e(w)]),_:1},512)]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}},le=$(W,[["__scopeId","data-v-3f5d5183"]]);export{le as default};
