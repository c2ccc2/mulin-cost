import{c as b}from"./project-CvO5xYQd.js";import{_ as x,e as V,r as u,H as w,f as s,K as C,D as I,k as F,o as D,j as o,h as r,p as f}from"./index-DOTrAPYh.js";const R={__name:"create",emits:["success","cancel"],setup($,{emit:g}){const{proxy:l}=V(),i=g,n=u(),a=u(!1);u([{userId:1,userName:"张三"},{userId:2,userName:"李四"},{userId:3,userName:"王五"}]);const t=w({projectName:"",projectManager:"",status:1,remark:""}),j={projectName:[{required:!0,message:"请输入项目名称",trigger:"blur"}],projectManager:[{required:!0,message:"请选择项目经理",trigger:"change"}]},v=async()=>{n.value&&await n.value.validate(async p=>{if(p){a.value=!0;try{(await b(t)).code===200?(l.$modal.msgSuccess("项目创建成功"),i("success")):l.$modal.msgError("res.msg || '创建失败'")}catch(e){l.$modal.msgError("创建项目时发生错误"),console.error(e)}finally{a.value=!1}}})},k=()=>{i("cancel")};return(p,e)=>{const d=s("el-input"),c=s("el-form-item"),_=s("el-button"),N=s("el-form"),y=C("loading");return I((D(),F(N,{ref_key:"projectFormRef",ref:n,model:t,rules:j,"label-width":"100px"},{default:o(()=>[r(c,{label:"项目名称",prop:"projectName"},{default:o(()=>[r(d,{modelValue:t.projectName,"onUpdate:modelValue":e[0]||(e[0]=m=>t.projectName=m),placeholder:"请输入项目名称"},null,8,["modelValue"])]),_:1}),r(c,{label:"项目描述",prop:"remark"},{default:o(()=>[r(d,{modelValue:t.remark,"onUpdate:modelValue":e[1]||(e[1]=m=>t.remark=m),type:"textarea",rows:4,placeholder:"请输入项目描述"},null,8,["modelValue"])]),_:1}),r(c,null,{default:o(()=>[r(_,{type:"primary",onClick:v,loading:a.value},{default:o(()=>e[2]||(e[2]=[f(" 提交 ")])),_:1,__:[2]},8,["loading"]),r(_,{onClick:k},{default:o(()=>e[3]||(e[3]=[f(" 取消 ")])),_:1,__:[3]})]),_:1})]),_:1},8,["model"])),[[y,a.value]])}}},E=x(R,[["__scopeId","data-v-00ae51ff"]]);export{E as default};
