import{l as V}from"./day-BW9qJLif.js";import{b as F}from"./project-CvO5xYQd.js";import L from"./fillHour-_Xirf1b8.js";import P from"./infoHour-CSPXOMV2.js";import{_ as T,e as E,r as d,B as J,f as _,c as l,o as r,h as t,j as s,i,m as w,l as C,W as M,p as y,F as q,C as A,t as G}from"./index-DOTrAPYh.js";import"./projectHour-DaHsWXCm.js";import"./other-DCksgyzN.js";import"./editHour-BIAEWHWj.js";import"./dayReviewList-BjF4Dn5J.js";const K={class:"app-container"},Q={class:"grid-content bg-purple"},U={class:"Btngroups"},X={class:"btns"},Z={class:"text item"},ee={key:0},te={key:1},ae={key:2},oe={key:3},se={key:0},ne={key:1},le={key:2},re={key:3},ie={style:{"margin-left":"10px"}},de={class:"grid-content bg-purple-dark"},ce={class:"projectName"},ue={__name:"index",setup(_e){const{proxy:H}=E(),c=H.$moment,D=d([]),b=d([]);d(new Date);const m=d(!1),n=d({startDate:"",endDate:""}),v=d(null),k=d(null),u=async()=>{try{const a=await V(n.value);a.code===200&&(D.value=a.data)}catch(a){console.error("获取工时列表失败:",a)}},j=async()=>{try{const a=await F();a.code===200&&(b.value=a.data||[])}catch(a){console.error("获取项目列表失败:",a)}},Y=async()=>{n.value.startDate=c().isoWeekday(1).format("YYYY-MM-DD"),n.value.endDate=c().isoWeekday(7).format("YYYY-MM-DD")},W=()=>{const a=c(n.value.startDate).startOf("week").subtract(7,"days").format("YYYY-MM-DD"),e=c(n.value.startDate).endOf("week").subtract(7,"days").format("YYYY-MM-DD");n.value.startDate=a,n.value.endDate=e,m.value=!1,u()},N=()=>{const a=c(n.value.startDate).startOf("week").add(7,"days").format("YYYY-MM-DD"),e=c(n.value.startDate).endOf("week").add(7,"days").format("YYYY-MM-DD");console.log(n.value),n.value.startDate=a,n.value.endDate=e,m.value=!1,u()},S=()=>{Y(),m.value=!0,u()},$=(a,e)=>{v.value&&v.value.show(a)},B=(a,e)=>{k.value&&k.value.show(a)},R=()=>{u()},z=()=>{u()};return J(()=>{Y(),u(),j(),m.value=!0}),(a,e)=>{const p=_("el-button"),h=_("el-row"),f=_("el-table-column"),I=_("el-table"),g=_("el-card"),x=_("el-col");return r(),l("div",K,[t(h,{gutter:20},{default:s(()=>[t(x,{span:16},{default:s(()=>[i("div",Q,[t(g,{class:"box-card"},{header:s(()=>[i("span",null,[i("div",U,[i("div",X,[t(h,null,{default:s(()=>[t(p,{type:"primary",plain:"",onClick:W},{default:s(()=>e[0]||(e[0]=[y("向前")])),_:1,__:[0]}),t(p,{type:"primary",plain:"",onClick:N},{default:s(()=>e[1]||(e[1]=[y("向后")])),_:1,__:[1]}),t(p,{type:"primary",plain:"",onClick:S,disabled:w(m)},{default:s(()=>e[2]||(e[2]=[y("本周")])),_:1,__:[2]},8,["disabled"])]),_:1})]),e[3]||(e[3]=i("div",{class:"btn"},null,-1))])])]),default:s(()=>[i("div",Z,[t(I,{data:w(D),style:{width:"100%"},"show-header":!1},{default:s(()=>[t(f,{prop:"date",label:"日期",width:"140"}),t(f,{prop:"week",label:"星期",width:"80"}),t(f,{prop:"createTime",label:"提交时间",align:"center"},{default:s(o=>[o.row.createTime!=null?(r(),l("span",ee," 已填报 ")):o.row.status==2?(r(),l("span",te," 缺报 ")):o.row.status==3?(r(),l("span",ae," 尚未开始 ")):(r(),l("span",oe))]),_:1}),t(f,{label:"审核状态",align:"center"},{default:s(o=>[o.row.reviewStatus==0?(r(),l("span",se," 待审核 ")):C("",!0),o.row.reviewStatus==1?(r(),l("span",ne," 审核通过 ")):C("",!0),o.row.reviewStatus==-1?(r(),l("span",le," 已驳回 ")):(r(),l("span",re))]),_:1}),t(f,{width:"295",label:"提交",align:"center"},{default:s(o=>[i("span",ie,[t(p,{type:"primary",size:"small",style:M({display:o.row.status==2?"":"none"}),onClick:O=>$(o.row,o.$index)},{default:s(()=>e[4]||(e[4]=[y("提交工时 ")])),_:2,__:[4]},1032,["style","onClick"])]),t(p,{size:"small",style:M({display:o.row.status==1?"":"none"}),onClick:O=>B(o.row,o.$index)},{default:s(()=>e[5]||(e[5]=[y("查看详情 ")])),_:2,__:[5]},1032,["style","onClick"])]),_:1})]),_:1},8,["data"])])]),_:1})])]),_:1}),t(x,{span:8},{default:s(()=>[i("div",de,[t(g,{class:"box-card"},{header:s(()=>e[6]||(e[6]=[i("span",null,"我参加的项目",-1)])),default:s(()=>[(r(!0),l(q,null,A(w(b),o=>(r(),l("div",{key:o.projectId,class:"text item projectPanel"},[i("div",ce,G(o.projectName),1)]))),128))]),_:1})])]),_:1})]),_:1}),t(L,{ref_key:"fillHourRef",ref:v,onCommit:R},null,512),t(P,{ref_key:"infoHourRef",ref:k,onCommit:z},null,512)])}}},Ye=T(ue,[["__scopeId","data-v-5b152484"]]);export{Ye as default};
