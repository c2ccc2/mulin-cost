import{_ as y,e as j,a as I,w as $,r as w,B as x,f as u,c as B,o as C,i as o,h as c,j as i,p as l,t as P}from"./index-DOTrAPYh.js";import{i as S,e as b,d as k}from"./project-CvO5xYQd.js";const E={class:"setting-container"},h={class:"section"},V={class:"section-content"},N={class:"status-display"},T={class:"status-buttons"},M={class:"section"},q={class:"section-content"},D={__name:"setting",props:{projectId:{type:String,required:!0}},setup(m){const{proxy:s}=j(),_=I(),n=m;$(()=>n.projectId,e=>{});const r=w(""),f=async()=>{if(n.projectId)try{const e=await S(n.projectId);e.code===200&&(r.value=e.data.status)}catch(e){console.error("获取项目成员列表失败:",e)}},p=async e=>{try{let t={projectId:n.projectId,enable:!e};const a=await b(t);a.code===200?(s.$modal.msgSuccess("项目状态更新成功"),r.value=e):s.$modal.msgError(a.msg)}catch{s.$modal.msgError("更新项目状态失败")}},g=async()=>{s.$modal.confirm("确定要删除该项目吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(async()=>{try{const e=await k(n.projectId);e.code===200?(s.$modal.msgSuccess("项目删除成功"),_.push("/project/list")):s.$modal.msgError(e.msg)}catch{s.$modal.msgError("删除项目失败")}}).catch(()=>{s.$modal.msg("已取消删除")})};return x(()=>{f()}),(e,t)=>{const a=u("el-tag"),d=u("el-button");return C(),B("div",E,[o("div",h,[t[4]||(t[4]=o("div",{class:"section-title"},"当前状态",-1)),o("div",V,[o("div",N,[c(a,{type:r.value===!0?"success":"info"},{default:i(()=>[l(P(r.value===!0?"进行中":"停止"),1)]),_:1},8,["type"])]),o("div",T,[c(d,{type:"success",plain:"",onClick:t[0]||(t[0]=v=>p(!0))},{default:i(()=>t[2]||(t[2]=[l("进行中")])),_:1,__:[2]}),c(d,{type:"info",plain:"",onClick:t[1]||(t[1]=v=>p(!1))},{default:i(()=>t[3]||(t[3]=[l("停止项目")])),_:1,__:[3]})])])]),o("div",M,[t[6]||(t[6]=o("div",{class:"section-title"},"删除项目",-1)),o("div",q,[c(d,{type:"danger",plain:"",onClick:g},{default:i(()=>t[5]||(t[5]=[l("删除项目")])),_:1,__:[5]})])])])}}},A=y(D,[["__scopeId","data-v-80f36169"]]);export{A as default};
