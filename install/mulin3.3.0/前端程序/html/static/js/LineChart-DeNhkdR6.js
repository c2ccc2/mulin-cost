import{i as p}from"./index-Bb6yjXMn.js";import{_ as m,r as x,b,w as g,B as w,J as v,V as k,c as D,o as H,W as S,M as z}from"./index-DOTrAPYh.js";const L={__name:"LineChart",props:{className:{type:String,default:""},width:{type:String,default:"100%"},height:{type:String,default:"350px"},chartData:{type:[Object,Array],required:!0}},setup(n,{expose:y}){const t=n,c=x(null);let a=null;const o=b(()=>{if(Array.isArray(t.chartData)){const s=t.chartData.map(e=>e.fillDate||""),i=t.chartData.map(e=>e.workHour||0),r=t.chartData.map(e=>e.otherHour||0);return{days:s,workHours:i,otherHours:r}}return t.chartData&&typeof t.chartData=="object"?{days:t.chartData.days||[],workHours:t.chartData.workHours||[],otherHours:t.chartData.otherHours||[]}:{days:[],workHours:[],otherHours:[]}});function u(){c.value&&(a=p(c.value),h())}function h(){if(!a)return;const s=o.value.days&&o.value.days.length>0,i={title:{text:s?"每日工时统计":"暂无数据",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"},formatter:r=>{let e=`${r[0].name}<br/>`,f=0;return r.forEach(l=>{e+=`${l.marker}${l.seriesName}: ${l.value} 小时<br/>`,f+=l.value}),e+=`总工时: ${f} 小时`,e}},legend:{data:["工作工时","其他工时"]},grid:{left:"20",right:"20",bottom:"20",top:"60",containLabel:!0},xAxis:{type:"category",data:o.value.days,axisLabel:{formatter:r=>r?r.substring(5):""}},yAxis:{type:"value",axisLabel:{formatter:"{value} h"}},series:[{name:"工作工时",type:"bar",stack:"总量",data:o.value.workHours,barMaxWidth:60,itemStyle:{color:"#5b8ff9"}},{name:"其他工时",type:"bar",stack:"总量",data:o.value.otherHours,barMaxWidth:60,itemStyle:{color:"#5ad8a6"}}]};s||(i.graphic={type:"text",left:"center",top:"center",style:{text:"暂无数据",fontSize:14,fill:"#999"}}),a.setOption(i,!0)}g(o,()=>{a&&h()},{deep:!0});function d(){a&&a.resize()}return w(()=>{v(()=>{u(),window.addEventListener("resize",d)})}),k(()=>{a&&a.dispose(),window.removeEventListener("resize",d)}),y({initChart:u}),(s,i)=>(H(),D("div",{class:z(n.className),style:S({height:n.height,width:n.width}),ref_key:"chartRef",ref:c},null,6))}},$=m(L,[["__scopeId","data-v-5f4d9591"]]);export{$ as default};
