(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-346cec43","chunk-5c83a45e"],{"1a07":function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"f",(function(){return a})),i.d(e,"c",(function(){return s})),i.d(e,"d",(function(){return l})),i.d(e,"e",(function(){return u})),i.d(e,"b",(function(){return c}));i("99af");var r=i("b775"),o=i("c38a");function n(t){return Object(r["a"])({url:"/mh/hour/day/create",method:"post",data:t})}function a(t){return Object(r["a"])({url:"/mh/hour/day/edit",method:"put",data:t})}function s(t){return Object(r["a"])({url:"/mh/hour/day/"+Object(o["e"])(t),method:"get"})}function l(t,e){return Object(r["a"])({url:"/mh/hour/day/list?endDate=".concat(e,"&startDate=").concat(t),method:"get"})}function u(t){return Object(r["a"])({url:"/mh/hour/day/query",method:"get",params:t})}function c(){return Object(r["a"])({url:"/mh/hour/day/fillStatus",method:"get"})}},2257:function(t,e,i){"use strict";i.d(e,"c",(function(){return o})),i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return a}));var r=i("b775");i("c38a");function o(t){return Object(r["a"])({url:"/project/hour/detail?hourId="+t,method:"get"})}function n(t){return Object(r["a"])({url:"/project/hour/count?projectId="+t,method:"get"})}function a(t){return Object(r["a"])({url:"/project/hour/list",method:"get",params:t})}},2938:function(t,e,i){},"4e40":function(t,e,i){"use strict";i("5ed3")},"4fee":function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"f",(function(){return n})),i.d(e,"b",(function(){return a})),i.d(e,"d",(function(){return s})),i.d(e,"c",(function(){return l})),i.d(e,"e",(function(){return u}));var r=i("b775");function o(t){return Object(r["a"])({url:"/project/create",method:"post",data:t})}function n(t){return Object(r["a"])({url:"/project/list",method:"get",params:t})}function a(t){return Object(r["a"])({url:"/project/remove?projectId="+t,method:"delete"})}function s(t){return Object(r["a"])({url:"/project/"+t,method:"get"})}function l(t){return Object(r["a"])({type:"form",url:"/project/enable",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"put",data:t})}function u(){return Object(r["a"])({url:"/project/myJoin",method:"get"})}},"5ed3":function(t,e,i){},7276:function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("el-dialog",{staticStyle:{width:"100%",margin:"0 auto"},attrs:{title:"编辑工时:"+t.hourTime,visible:t.dialogFormVisible,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[i("el-form",{staticStyle:{"max-height":"600px","overflow-y":"scroll"},attrs:{model:t.form,"status-icon":"",rules:t.rules},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleSubmit(e)}}},[t._l(t.projectArr,(function(e){return i("el-form-item",{key:e.projectId},[i("el-card",{staticClass:"box-card",attrs:{shadow:"never"}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"projectLabel"},[t._v(" #"+t._s(e.projectId)+" "+t._s(e.projectName)+" ")])]),i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[i("el-input-number",{staticStyle:{"margin-right":"auto",width:"40%"},attrs:{type:"number",max:24,min:0,maxlength:"2",autocomplete:"off",disabled:e.isArchive,precision:2},on:{input:function(i){return t.lookinput(e.hour)}},model:{value:e.hour,callback:function(i){t.$set(e,"hour",t._n(i))},expression:"item.hour"}}),i("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")])],1),i("hr"),i("el-input",{staticStyle:{"margin-top":"5px"},attrs:{type:"textarea",maxlength:"200",disabled:e.isArchive,autosize:{minRows:2,maxRows:6},"show-word-limit":"",placeholder:"请填写日志"},model:{value:e.daily,callback:function(i){t.$set(e,"daily",i)},expression:"item.daily"}})],1)],1)})),i("el-form-item",[i("el-card",{staticClass:"box-card",attrs:{shadow:"never",mode:t.otherHour}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("span",{staticClass:"projectLabel"},[t._v("其他工时")])]),i("div",{staticStyle:{display:"flex","justify-content":"flex-end"}},[i("el-input-number",{staticStyle:{"margin-right":"auto",width:"40%"},attrs:{type:"number",max:24,min:0,maxlength:"2",autocomplete:"off",precision:2},on:{input:function(e){return t.lookinput(t.otherHour.hour)}},model:{value:t.otherHour.hour,callback:function(e){t.$set(t.otherHour,"hour",t._n(e))},expression:"otherHour.hour"}}),i("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")])],1),i("hr"),i("el-input",{staticStyle:{"margin-top":"5px"},attrs:{type:"textarea",maxlength:"200",autosize:{minRows:2,maxRows:6},"show-word-limit":"",placeholder:"请填写日志"},model:{value:t.otherHour.daily,callback:function(e){t.$set(t.otherHour,"daily",e)},expression:"otherHour.daily"}})],1)],1)],2),i("div",{staticClass:"myfoot"},[i("div",{staticStyle:{float:"right","text-align":"right"}},[i("span",{staticClass:"tips",staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.submitTips))]),i("el-input",{staticStyle:{width:"20%"},attrs:{max:24,autocomplete:"off",disabled:!0},model:{value:t.useHourTotal,callback:function(e){t.useHourTotal=t._n(e)},expression:"useHourTotal"}}),i("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")]),i("div",{staticClass:"footer-btn",attrs:{slot:"footer",align:"center"},slot:"footer"},[i("el-button",{style:{width:"100px"},attrs:{size:"small"},on:{click:t.handleClose}},[t._v(" 取 消 ")]),i("el-button",{style:{width:"100px"},attrs:{disabled:t.submitFlag,size:"small",type:"primary"},on:{click:t.handleSubmit}},[t._v(" 提交 ")])],1)],1)])],1)],1)},o=[],n=i("ade3"),a=(i("7db0"),i("14d9"),i("d3b7"),i("0643"),i("fffc"),i("4e3e"),i("159b"),i("1a07")),s=i("4fee"),l={data:function(){var t=function(t,e,i){};return Object(n["a"])(Object(n["a"])(Object(n["a"])(Object(n["a"])({dialogFormVisible:!1,form:{date:"",projectHours:[],id:""},rules:{hour:[{validator:t,trigger:"blur"}]},hourTime:"",projectArr:[],otherHour:{hour:0,daily:""},info:{}},"rules",{hour:[{validator:t,trigger:"blur"}]}),"useHourTotal",0),"submitFlag",!0),"submitTips","")},created:function(){},methods:{open:function(){this.submitFlag=!0,this.hourTime=this.info.fillDate,this.form.id=this.info.id,this.getProjectList(),this.dialogFormVisible=!0},getProjectList:function(){var t=this;Object(s["e"])().then((function(e){200==e.code&&e.data.forEach((function(e){var i=t.projectArr.find((function(t){return t.projectId===e.projectId}));i||t.projectArr.push(e)}))}))},handleSubmit:function(){var t=this;this.form.date=this.hourTime;var e=0;if(this.projectArr.forEach((function(t){e+=t.hour+0,t.projectName&&delete t.projectName})),e+=this.otherHour.hour,e>=24||e<=0)return this.submitFlag=!0,void(this.submitTips="无法提交，工时不能为0 或者超过24小时! ");var i={id:this.form.id,projectHours:this.projectArr,otherHour:this.otherHour};Object(a["f"])(i).then((function(e){200==e.code?(t.$message.success("修改成功"),t.$emit("commit"),t.handleClose()):t.$message.error("提交失败，失败原因为：",e.msg)})).catch((function(e){t.$message.error("出现错误，错误原因为",e)}))},handleClose:function(){this.submitFlag=!0,this.submitTips="",this.form.projectHours=[],this.form.date="",this.projectArr=[],this.otherHour={hour:0,daily:""},this.dialogFormVisible=!1},lookinput:function(t){null!=t&&void 0!=t||(t=0);var e=0;return this.projectArr.forEach((function(t){return e+=t.hour+0})),e+=this.otherHour.hour,this.useHourTotal=e,""===t||t<0?(t=0,this.submitFlag=!0,void(this.submitTips="工时不能为空")):e>=24?(this.submitFlag=!0,void(this.submitTips="无法提交，工时最大范围为1-24小时! ")):e>8?(this.submitFlag=!1,void(this.submitTips="可以提交!（加班）")):e>0?(this.submitFlag=!1,void(this.submitTips="可以提交")):(this.submitTips="请填写工时，工时范围为1-24小时!",void(this.submitFlag=!0))}}},u=l,c=(i("7416"),i("2877")),d=Object(c["a"])(u,r,o,!1,null,"cf1759ec",null);e["default"]=d.exports},7416:function(t,e,i){"use strict";i("2938")},"7a8b":function(t,e,i){"use strict";i.r(e);var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"main"},[i("el-dialog",{attrs:{title:"日报详情",visible:t.dailyDialog,width:"55%","before-close":t.handleViewCannel,align:"center","custom-class":"detailDialog"},on:{"update:visible":function(e){t.dailyDialog=e}}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form",{ref:"form",attrs:{"label-width":"80px"}},[i("el-form-item",[i("el-descriptions",{attrs:{title:"信息",column:2}},[i("el-descriptions-item",{attrs:{label:"填报日期"}},[t._v(" "+t._s(this.info.fillDate)+" ")]),i("el-descriptions-item",{attrs:{label:"工时总计"}},[t._v(t._s(this.info.totalHour?this.info.totalHour:0)+"小时")]),i("el-descriptions-item",{attrs:{label:"项目工时"}},[t._v(t._s(this.info.workHour?this.info.workHour:0)+"小时")]),i("el-descriptions-item",{attrs:{label:"其他工时"}},[t._v(t._s(this.info.otherHour?this.info.otherHour:0)+"小时")]),i("el-descriptions-item",{attrs:{label:"提交时间"}},[t._v(t._s(this.info.createTime))])],1)],1),i("el-form-item",[i("div",{staticClass:"el-descriptions__title",staticStyle:{"text-align":"left"}},[t._v(" 项目工时 ")]),i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.projectHours}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"50",align:"center"}}),i("el-table-column",{attrs:{prop:"projectName",label:"项目名称",width:"260"}}),i("el-table-column",{attrs:{prop:"hour",label:"工时",width:"80 ",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.hour)+"小时")])]}}])}),i("el-table-column",{attrs:{prop:"daily",label:"工作内容",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v(t._s(e.row.daily?e.row.daily:"无"))])]}}])})],1)],1),i("el-form-item",[i("div",{staticClass:"el-descriptions__title",staticStyle:{"text-align":"left"}},[t._v(" 其他工时 ")]),i("el-descriptions",{attrs:{title:"",column:2}},[i("el-descriptions-item",{attrs:{label:"工时"}},[t._v(t._s(this.otherHour.hour?this.otherHour.hour:0)+"小时")]),i("el-descriptions-item",{attrs:{label:"工作内容"}},[t._v(t._s(this.otherHour.daily?this.otherHour.daily:"无"))])],1)],1),i("el-form-item",[i("div",{attrs:{align:"center"}},[i("el-button",{style:{width:"120px"},attrs:{size:"small"},on:{click:t.handleViewCannel}},[t._v("关闭")]),i("el-button",{style:{width:"120px"},attrs:{type:"primary",size:"small"},on:{click:t.handleEdit}},[t._v("修改")])],1)])],1)],1)],1)],1),i("editHour",{ref:"editHour",on:{commit:t.open}})],1)},o=[],n=i("1a07"),a=i("2257"),s=i("c194"),l=i("7276"),u={components:{editHour:l["default"]},data:function(){return{dailyDialog:!1,id:0,info:{},projectHours:[],otherHour:{}}},created:function(){},methods:{open:function(){this.dailyDialog=!0,this.getDetail(),this.getProject(),this.getOther()},handleEdit:function(){this.$refs.editHour.otherHour=this.otherHour,this.$refs.editHour.projectArr=this.projectHours,this.$refs.editHour.info=this.info,this.$refs.editHour.open()},getDetail:function(){var t=this;Object(n["c"])(this.id).then((function(e){200==e.code&&(t.info=e.data)}))},getProject:function(){var t=this;Object(a["c"])(this.id).then((function(e){200==e.code&&(t.projectHours=e.data)}))},getOther:function(){var t=this;Object(s["a"])(this.id).then((function(e){200==e.code&&null!=e.data&&(t.otherHour=e.data)}))},handleViewCannel:function(){this.dailyDialog=!1}}},c=u,d=(i("4e40"),i("2877")),h=Object(d["a"])(c,r,o,!1,null,"463b1db5",null);e["default"]=h.exports},c194:function(t,e,i){"use strict";i.d(e,"a",(function(){return o})),i.d(e,"b",(function(){return n}));var r=i("b775");i("c38a");function o(t){return Object(r["a"])({url:"/mh/hour/other/detail?hourId=".concat(t),method:"get"})}function n(t){return Object(r["a"])({url:"/mh/hour/other/query",method:"get",params:t})}}}]);