import{_ as F,a as M,r as c,B as E,f as r,c as v,o as u,h as o,j as l,i as n,F as j,C as x,k as N,p as g,t as m,l as L}from"./index-DOTrAPYh.js";import{a as R}from"./project-CvO5xYQd.js";import T from"./create-Dz3v2wb4.js";const A={class:"main"},G={slot:"header",class:"clearfix"},H={class:"grid-content"},J=["title"],K={class:"card-content"},O={class:"card-footer"},Q={class:"projectpeople"},W={key:0,class:"pagination-container"},X={__name:"index",setup(Y){const h=M(),w=c([{dictSort:1,type:"primary",icon:"el-icon-s-promotion",label:"进行中",value:"1"},{dictSort:2,type:"",icon:"el-icon-video-pause",label:"已停止",value:"0"}]),C=c([]),i=c("1"),f=c(0),s=c({pageNum:1,pageSize:12,status:"1"}),d=c(!1),k=t=>{i.value=t,s.value.status=t==="all"?void 0:t,s.value.pageNum=1,p()},p=async()=>{try{const t={pageNum:s.value.pageNum,pageSize:s.value.pageSize,status:s.value.status},e=await R(t);console.log("获取项目列表成功:",e),e.code===200&&(C.value=e.rows||e.data,f.value=e.total||0)}catch(t){console.error("获取项目列表失败:",t)}},V=()=>{d.value=!0},z=()=>{d.value=!1,p()},B=t=>{console.log(t);let e=t.projectId;h.push({path:"/project/detail/index",query:{projectId:e}})},P=t=>{s.value.pageSize=t,p()},I=t=>{s.value.pageNum=t,p()};return E(()=>{p()}),(t,e)=>{const _=r("el-button"),y=r("el-col"),S=r("el-row"),D=r("el-divider"),b=r("el-card"),$=r("el-pagination"),U=r("el-dialog");return u(),v("div",A,[o(b,{class:"box-card"},{default:l(()=>[n("div",G,[o(S,{gutter:10,class:"mb8"},{default:l(()=>[(u(!0),v(j,null,x(w.value,a=>(u(),N(y,{key:a.dictSort,span:1.5},{default:l(()=>[o(_,{class:"status-btn",type:a.value===i.value?a.type:"",plain:a.value!==i.value,size:"default",onClick:q=>k(a.value)},{default:l(()=>[g(m(a.label),1)]),_:2},1032,["type","plain","onClick"])]),_:2},1024))),128)),o(y,{span:1.5},{default:l(()=>[o(_,{class:"status-btn",type:i.value==="all"?"primary":"",plain:i.value!=="all",size:"default",onClick:e[0]||(e[0]=a=>k("all"))},{default:l(()=>e[5]||(e[5]=[g(" 所有 ")])),_:1,__:[5]},8,["type","plain"])]),_:1}),o(_,{style:{float:"right"},size:"default",type:"primary",plain:"",onClick:V},{default:l(()=>e[6]||(e[6]=[g("创建项目")])),_:1,__:[6]})]),_:1})]),n("div",H,[o(S,{class:"myprocard"},{default:l(()=>[(u(!0),v(j,null,x(C.value,a=>(u(),N(y,{span:6,key:a.projectId,class:"box-card-col"},{default:l(()=>[n("div",null,[o(b,{class:"box-card",shadow:"hover"},{default:l(()=>[n("div",{slot:"header",class:"clearfix card-header text-css",title:a.projectName},m(a.projectName),9,J),n("div",K,m(a.remark?a.remark:"暂无描述"),1),o(D),n("div",O,[n("div",Q,[n("span",null,"创建者："+m(a.projectManagerName),1),n("span",null,[o(_,{onClick:q=>B(a),type:"primary",size:"small",plain:""},{default:l(()=>e[7]||(e[7]=[g("详情")])),_:2,__:[7]},1032,["onClick"])])])])]),_:2},1024)])]),_:2},1024))),128))]),_:1}),f.value>0?(u(),v("div",W,[o($,{background:"",layout:"total, sizes, prev, pager, next, jumper",total:f.value,"page-size":s.value.pageSize,"onUpdate:pageSize":e[1]||(e[1]=a=>s.value.pageSize=a),"current-page":s.value.pageNum,"onUpdate:currentPage":e[2]||(e[2]=a=>s.value.pageNum=a),"page-sizes":[6,12,18,24],onSizeChange:P,onCurrentChange:I},null,8,["total","page-size","current-page"])])):L("",!0)])]),_:1}),o(U,{title:"创建项目",modelValue:d.value,"onUpdate:modelValue":e[4]||(e[4]=a=>d.value=a),width:"50%","before-close":z},{default:l(()=>[o(T,{onSuccess:z,onCancel:e[3]||(e[3]=a=>d.value=!1)})]),_:1},8,["modelValue"])])}}},te=F(X,[["__scopeId","data-v-edc777a3"]]);export{te as default};
