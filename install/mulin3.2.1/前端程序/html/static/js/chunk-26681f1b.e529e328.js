(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-26681f1b"],{"1a07":function(t,e,r){"use strict";r.d(e,"a",(function(){return a})),r.d(e,"g",(function(){return n})),r.d(e,"d",(function(){return s})),r.d(e,"b",(function(){return u})),r.d(e,"e",(function(){return l})),r.d(e,"f",(function(){return c})),r.d(e,"c",(function(){return h}));r("99af");var o=r("b775"),i=r("c38a");function a(t){return Object(o["a"])({url:"/mh/hour/day/create",method:"post",data:t})}function n(t){return Object(o["a"])({url:"/mh/hour/day/edit",method:"put",data:t})}function s(t){return Object(o["a"])({url:"/mh/hour/day/"+Object(i["e"])(t),method:"get"})}function u(t){return Object(o["a"])({url:"/mh/hour/day/"+t,method:"delete"})}function l(t,e){return Object(o["a"])({url:"/mh/hour/day/list?endDate=".concat(e,"&startDate=").concat(t),method:"get"})}function c(t){return Object(o["a"])({url:"/mh/hour/day/query",method:"get",params:t})}function h(){return Object(o["a"])({url:"/mh/hour/day/fillStatus",method:"get"})}},"46d0":function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"main"},[r("el-dialog",{staticStyle:{width:"80%",margin:"0 auto"},attrs:{title:"工时填报:"+t.hourTime,visible:t.dialogFormVisible,"before-close":t.handleClose,"close-on-click-modal":!1},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[r("el-form",{staticStyle:{"max-height":"600px","overflow-y":"scroll"},attrs:{model:t.form,"status-icon":"",rules:t.rules}},[t._l(t.projectArr,(function(e){return r("el-form-item",{key:e.projectId,attrs:{label:"项目工时"}},[r("el-card",{staticClass:"box-card",staticStyle:{width:"100%"},attrs:{shadow:"never"}},[r("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[r("span",{staticClass:"projectLabel"},[t._v(" #"+t._s(e.projectId)+" "+t._s(e.projectName)+" ")])]),r("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center"}},[r("el-input-number",{staticStyle:{width:"40%"},attrs:{type:"number",max:24,min:0,maxlength:"2",autocomplete:"off",disabled:e.isArchive,precision:2},on:{input:function(r){return t.lookinput(e.hour)}},model:{value:e.hour,callback:function(r){t.$set(e,"hour",t._n(r))},expression:"item.hour"}}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v("小时")])],1),r("hr"),r("el-input",{staticStyle:{"margin-top":"5px"},attrs:{type:"textarea",maxlength:"200",disabled:e.isArchive,autosize:{minRows:2,maxRows:6},"show-word-limit":"",placeholder:"请填写日志"},model:{value:e.daily,callback:function(r){t.$set(e,"daily",r)},expression:"item.daily"}})],1)],1)})),r("el-form-item",{attrs:{label:"普通工时"}},[r("el-card",{staticClass:"box-card",attrs:{shadow:"never",mode:t.otherHour}},[r("div",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center"}},[r("el-input-number",{staticStyle:{width:"40%"},attrs:{type:"number",max:24,min:0,maxlength:"2",autocomplete:"off",precision:2},on:{input:function(e){return t.lookinput(t.otherHour.hour)}},model:{value:t.otherHour.hour,callback:function(e){t.$set(t.otherHour,"hour",t._n(e))},expression:"otherHour.hour"}}),r("span",{staticStyle:{"margin-left":"10px"}},[t._v("小时")])],1),r("hr"),r("el-input",{staticStyle:{"margin-top":"5px"},attrs:{type:"textarea",maxlength:"200",autosize:{minRows:2,maxRows:6},"show-word-limit":"",placeholder:"请填写日志"},model:{value:t.otherHour.daily,callback:function(e){t.$set(t.otherHour,"daily",e)},expression:"otherHour.daily"}})],1)],1)],2),r("div",{staticClass:"myfoot"},[r("div",{staticStyle:{float:"right","text-align":"right"}},[r("span",{staticClass:"tips",staticStyle:{"margin-right":"10px"}},[t._v(t._s(t.submitTips))]),r("el-input",{staticStyle:{width:"20%"},attrs:{max:24,autocomplete:"off",disabled:!0},model:{value:t.useHourTotal,callback:function(e){t.useHourTotal=t._n(e)},expression:"useHourTotal"}}),r("span",{staticStyle:{margin:"0 10px"}},[t._v("小时")]),r("div",{staticClass:"footer-btn",attrs:{slot:"footer",align:"center"},slot:"footer"},[r("el-button",{style:{width:"100px"},attrs:{size:"small"},on:{click:t.handleClose}},[t._v(" 取 消 ")]),r("el-button",{style:{width:"100px"},attrs:{disabled:t.submitFlag,size:"small",type:"primary"},on:{click:t.handleSubmit}},[t._v(" 提交 ")])],1)],1)])],1)],1)},i=[],a=(r("d3b7"),r("0643"),r("4e3e"),r("159b"),r("1a07")),n=r("4fee"),s={data:function(){var t=function(t,e,r){};return{dialogFormVisible:!1,form:{date:"",projectHours:[]},rules:{hour:[{validator:t,trigger:"blur"}]},index:null,hourTime:"",projectArr:[],otherHour:{hour:0,daily:""},useHourTotal:0,submitFlag:!0,submitTips:""}},created:function(){},methods:{open:function(t,e){this.submitFlag=!0,this.index=e,this.hourTime=t.date,this.getProjectList(),this.dialogFormVisible=!0},getProjectList:function(){var t=this;Object(n["e"])().then((function(e){200==e.code&&(t.projectArr=e.data,t.projectArr.forEach((function(t){t.hour=0})))}))},handleSubmit:function(){var t=this;this.form.date=this.hourTime;var e=0;if(this.projectArr.forEach((function(t){e+=t.hour+0,t.projectName&&delete t.projectName})),e+=this.otherHour.hour,e>=24||e<=0)return this.submitFlag=!0,void(this.submitTips="无法提交，工时不能为0 或者超过24小时! ");this.form.projectHours=this.projectArr,this.form.otherHour=this.otherHour,Object(a["a"])(this.form).then((function(e){200==e.code?(t.$message.success("工时提交成功"),t.$emit("commit",t.index,e),t.handleClose()):t.$message.error("提交失败，失败原因为：",e.msg)})).catch((function(t){}))},handleClose:function(){this.submitFlag=!0,this.submitTips="",this.form.projectHours=[],this.form.date="",this.projectArr=[],this.otherHour={hour:0,daily:""},this.dialogFormVisible=!1},lookinput:function(t){var e=0;return this.projectArr.forEach((function(t){return e+=t.hour+0})),e+=this.otherHour.hour,this.useHourTotal=e,""===t||t<0?(t=0,this.submitFlag=!0,void(this.submitTips="工时不能为空")):e>=24?(this.submitFlag=!0,void(this.submitTips="无法提交，工时最大范围为1-24小时! ")):e>8?(this.submitFlag=!1,void(this.submitTips="可以提交!（加班）")):e>0?(this.submitFlag=!1,void(this.submitTips="可以提交")):(this.submitTips="请填写工时，工时范围为1-24小时!",void(this.submitFlag=!0))}}},u=s,l=(r("8b84"),r("2877")),c=Object(l["a"])(u,o,i,!1,null,"74e32f8d",null);e["default"]=c.exports},"4fee":function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"g",(function(){return a})),r.d(e,"f",(function(){return n})),r.d(e,"b",(function(){return s})),r.d(e,"d",(function(){return u})),r.d(e,"c",(function(){return l})),r.d(e,"e",(function(){return c}));var o=r("b775");function i(t){return Object(o["a"])({url:"/project/create",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/project/list",method:"get",params:t})}function n(t){return Object(o["a"])({url:"/project/myJoinList",method:"get",params:t})}function s(t){return Object(o["a"])({url:"/project/remove?projectId="+t,method:"delete"})}function u(t){return Object(o["a"])({url:"/project/"+t,method:"get"})}function l(t){return Object(o["a"])({type:"form",url:"/project/enable",headers:{"Content-Type":"application/x-www-form-urlencoded"},method:"put",data:t})}function c(){return Object(o["a"])({url:"/project/myJoin",method:"get"})}},"8b84":function(t,e,r){"use strict";r("e1c8")},e1c8:function(t,e,r){}}]);